<!doctype html><html lang=en-IT><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><title>AlphaAgents: Implementazione Multi-Agent A2A per Analisi Finanziaria Collaborativa - Cdani's Blog</title><meta name=Description content="Cdani's Blog"><meta property="og:url" content="https://c-daniele.github.io/it/posts/2025-08-31-alphaagents-a2a/"><meta property="og:site_name" content="Cdani's Blog"><meta property="og:title" content="AlphaAgents: Implementazione Multi-Agent A2A per Analisi Finanziaria Collaborativa"><meta property="og:description" content="1. Introduzione La quantit√† di framework che sta nascendo per lo sviluppo di applicazioni di GenAI √® incredibile e a mio avviso inizia ad essere pure eccessiva. Ogniqualvolta salta fuori un nuovo framework, mi sembra che faccia pi√π o meno le stesse cose di quello precedente. Magari alcuni hanno una capacit√† di modularizzazione migliore, oppure un disegno pi√π robusto contro l‚Äôobsolescenza nel lungo periodo, ma pi√π o meno mi sembrano tutti gli stessi e, sebbene mi piaccia sperimentare, lo studio di nuovi mirabolanti e promettenti framework di GenAI comincia ad appassionarmi sempre meno."><meta property="og:locale" content="en_IT"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-08-31T00:00:00+02:00"><meta property="article:modified_time" content="2025-08-31T00:00:00+02:00"><meta property="article:tag" content="GenAI"><meta property="article:tag" content="Langchain"><meta property="article:tag" content="Agents"><meta property="og:image" content="https://c-daniele.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://c-daniele.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="AlphaAgents: Implementazione Multi-Agent A2A per Analisi Finanziaria Collaborativa"><meta name=twitter:description content="1. Introduzione La quantit√† di framework che sta nascendo per lo sviluppo di applicazioni di GenAI √® incredibile e a mio avviso inizia ad essere pure eccessiva. Ogniqualvolta salta fuori un nuovo framework, mi sembra che faccia pi√π o meno le stesse cose di quello precedente. Magari alcuni hanno una capacit√† di modularizzazione migliore, oppure un disegno pi√π robusto contro l‚Äôobsolescenza nel lungo periodo, ma pi√π o meno mi sembrano tutti gli stessi e, sebbene mi piaccia sperimentare, lo studio di nuovi mirabolanti e promettenti framework di GenAI comincia ad appassionarmi sempre meno."><meta name=application-name content="Cdani's Blog"><meta name=apple-mobile-web-app-title content="Cdani's Blog"><meta name=referrer content="no-referrer"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel=icon href=/logo_cd_v3.svg><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#00872b><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://c-daniele.github.io/it/posts/2025-08-31-alphaagents-a2a/><link rel=prev href=https://c-daniele.github.io/it/posts/2025-08-15-agent-reg-for-a2a/><link rel=next href=https://c-daniele.github.io/it/posts/2025-10-11-bells-inequalities/><link rel=stylesheet href=/css/style.min.css><link rel=preload href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.7.2/css/all.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.7.2/css/all.min.css></noscript><link rel=preload href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css></noscript><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"AlphaAgents: Implementazione Multi-Agent A2A per Analisi Finanziaria Collaborativa","inLanguage":"en-IT","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/c-daniele.github.io\/it\/posts\/2025-08-31-alphaagents-a2a\/"},"genre":"posts","keywords":"GenAI, Langchain, Agents","wordcount":8505,"url":"https:\/\/c-daniele.github.io\/it\/posts\/2025-08-31-alphaagents-a2a\/","datePublished":"2025-08-31T00:00:00+02:00","dateModified":"2025-08-31T00:00:00+02:00","publisher":{"@type":"Organization","name":""},"author":{"@type":"Person","name":"Me"},"description":""}</script></head><body data-header-desktop=fixed data-header-mobile=auto><script>const query=window.matchMedia("(prefers-color-scheme: dark)");function applyTheme(){let e=window.localStorage?.getItem("theme")||"auto",t=e==="dark"||e==="auto"&&query.matches;document.body.setAttribute("theme",t?"dark":"light"),document.body.setAttribute("cfg-theme",e)}applyTheme(),query.addEventListener("change",applyTheme)</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/it/ title="Cdani's Blog"><img class="lazyload logo" src=/svg/loading.min.svg data-src=/logo_cd_v3.svg data-srcset="/logo_cd_v3.svg, /logo_cd_v3.svg 1.5x, /logo_cd_v3.svg 2x" data-sizes=auto alt=/logo_cd_v3.svg title=/logo_cd_v3.svg>Cdani's Blog</a></div><div class=menu><div class=menu-inner><a class=menu-item href=/it/posts/>Archive </a><a class=menu-item href=/it/tags/>Tags </a><span class="menu-item delimiter"></span><span class="menu-item search" id=search-desktop>
<input type=text placeholder=Search... id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=Cerca><i class="fas fa-search fa-fw" aria-hidden=true></i>
</a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=Chiaro><i class="fas fa-times-circle fa-fw" aria-hidden=true></i>
</a><span class="search-button search-loading" id=search-loading-desktop><i class="fas fa-spinner fa-fw fa-spin" aria-hidden=true></i>
</span></span><a href=javascript:void(0); class="menu-item theme-switch" title="Cambiare il tema"><i class="fas fa-adjust fa-fw" aria-hidden=true></i>
</a><a href=javascript:void(0); class="menu-item language" title="Scegliere la lingua"><i class="fa fa-globe fa-fw" aria-hidden=true></i>
<select class=language-select id=language-select-desktop onchange="location=this.value"><option value=/it/posts/2025-08-31-alphaagents-a2a/ selected>Italiano</option><option value=/en/posts/2025-08-31-alphaagents-a2a/>English</option></select></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/it/ title="Cdani's Blog"><img class="lazyload logo" src=/svg/loading.min.svg data-src=/logo_cd_v3.svg data-srcset="/logo_cd_v3.svg, /logo_cd_v3.svg 1.5x, /logo_cd_v3.svg 2x" data-sizes=auto alt=/logo_cd_v3.svg title=/logo_cd_v3.svg>Cdani's Blog</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><div class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder=Search... id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=Cerca><i class="fas fa-search fa-fw" aria-hidden=true></i>
</a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=Chiaro><i class="fas fa-times-circle fa-fw" aria-hidden=true></i>
</a><span class="search-button search-loading" id=search-loading-mobile><i class="fas fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>Annulla</a></div><a class=menu-item href=/it/posts/ title>Archive</a><a class=menu-item href=/it/tags/ title>Tags</a><a href=javascript:void(0); class="menu-item theme-switch" title="Cambiare il tema">
<i class="fas fa-adjust fa-fw" aria-hidden=true></i>
</a><a href=javascript:void(0); class=menu-item title="Scegliere la lingua"><i class="fa fa-globe fa-fw" aria-hidden=true></i>
<select class=language-select onchange="location=this.value"><option value=/it/posts/2025-08-31-alphaagents-a2a/ selected>Italiano</option><option value=/en/posts/2025-08-31-alphaagents-a2a/>English</option></select></a></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>Contenuti</h2><div class=toc-content id=toc-content-auto></div></div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">AlphaAgents: Implementazione Multi-Agent A2A per Analisi Finanziaria Collaborativa</h1><div class=post-meta><div class=post-meta-line><span class=post-author><a href=/it/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>Me</a></span>&nbsp;<span class=post-category>incluso in <a href=/it/categories/software-development/><i class="far fa-folder fa-fw" aria-hidden=true></i>Software Development</a>&nbsp;<a href=/it/categories/artificial-intelligence/><i class="far fa-folder fa-fw" aria-hidden=true></i>Artificial Intelligence</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw" aria-hidden=true></i>&nbsp;<time datetime="August 31, 2025">August 31, 2025</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden=true></i>&nbsp;8505 parole&nbsp;
<i class="far fa-clock fa-fw" aria-hidden=true></i>&nbsp;40 minuti&nbsp;</div></div><div class="details toc" id=toc-static data-kept><div class="details-summary toc-title"><span>Contenuti</span>
<span><i class="details-icon fas fa-angle-right" aria-hidden=true></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#21-il-problema-e-la-soluzione>2.1 Il problema e la soluzione</a></li><li><a href=#22-i-tre-agenti>2.2 I tre agenti</a></li><li><a href=#23-il-meccanismo-di-collaborazione-e-debate>2.3 Il meccanismo di collaborazione e debate</a></li><li><a href=#24-gestione-intelligente-del-risk-tolerance>2.4 Gestione Intelligente del Risk Tolerance</a><ul><li><a href=#241-classificazione-dei-profili-di-rischio>2.4.1 Classificazione dei Profili di Rischio</a></li><li><a href=#242-esempi-di-classificazione-automatica>2.4.2 Esempi di Classificazione Automatica</a></li><li><a href=#243-integrazione-nel-processo-di-debate>2.4.3 Integrazione nel Processo di Debate</a></li></ul></li><li><a href=#25-vantaggi-dellapproccio-multi-agente-con-debate-strutturato>2.5 Vantaggi dell&rsquo;approccio multi-agente con debate strutturato</a></li></ul><ul><li><a href=#41-architettura-logica-complessiva>4.1 Architettura Logica Complessiva</a></li><li><a href=#42-processo-di-registrazione>4.2 Processo di registrazione</a></li><li><a href=#43-agent-card>4.3 Agent Card</a></li><li><a href=#44-flusso-di-analisi-end-to-end>4.4 Flusso di Analisi End-to-End</a></li><li><a href=#45-transport-layer-e-messaging-protocol>4.5 Transport Layer e Messaging Protocol</a></li></ul><ul><li><a href=#51-stack-tecnologico-e-dependencies>5.1 Stack Tecnologico e Dependencies</a></li><li><a href=#52-struttura-del-progetto>5.2 Struttura del Progetto</a></li><li><a href=#53-implementazione-del-group-chat-agent>5.3 Implementazione del Group Chat Agent</a><ul><li><a href=#531-inferenza-del-risk-tolerance>5.3.1 Inferenza del Risk Tolerance</a></li><li><a href=#532-estratto-del-codice>5.3.2 Estratto del codice</a></li></ul></li><li><a href=#54-pattern-di-comunicazione-a2a>5.4 Pattern di Comunicazione A2A</a></li><li><a href=#55-implementazione-degli-agenti-specializzati>5.5 Implementazione degli Agenti Specializzati</a><ul><li><a href=#551-fundamental-agent>5.5.1 Fundamental Agent</a></li><li><a href=#552-sentiment-agent---implementazione-vader>5.5.2 Sentiment Agent - Implementazione VADER</a></li><li><a href=#553-fundamental-agent---implementazione-keyword-based>5.5.3 Fundamental Agent - Implementazione Keyword-Based</a></li><li><a href=#554-valuation-agent-tools>5.5.4 Valuation Agent Tools</a></li></ul></li><li><a href=#56-agent-registration-e-discovery>5.6 Agent Registration e Discovery</a></li><li><a href=#57-consolidation-pattern-con-llm>5.7 Consolidation Pattern con LLM</a></li><li><a href=#58-semplificazioni-dellimplementazione-attuale>5.8 Semplificazioni dell&rsquo;implementazione attuale</a></li></ul><ul><li><a href=#61-fase-1-inizializzazione-e-setup-dellecosistema>6.1 Fase 1: Inizializzazione e Setup dell&rsquo;Ecosistema</a><ul><li><a href=#611-avvio-dellagent-registry>6.1.1 Avvio dell&rsquo;Agent Registry</a></li><li><a href=#612-startup-degli-agenti-specializzati>6.1.2 Startup degli Agenti Specializzati</a></li><li><a href=#613-avvio-del-group-chat-agent>6.1.3 Avvio del Group Chat Agent</a></li></ul></li><li><a href=#62-fase-2-ricezione-e-parsing-della-query-utente>6.2 Fase 2: Ricezione e Parsing della Query Utente</a><ul><li><a href=#621-richiesta-json-rpc-a2a>6.2.1 Richiesta JSON-RPC A2A</a></li><li><a href=#622-conversione-in-formato-a2a-message>6.2.2 Conversione in Formato A2A Message</a></li></ul></li><li><a href=#63-fase-3-inferenza-automatica-del-risk-tolerance>6.3 Fase 3: Inferenza Automatica del Risk Tolerance</a><ul><li><a href=#631-chiamata-llm-per-risk-assessment>6.3.1 Chiamata LLM per Risk Assessment</a></li></ul></li><li><a href=#64-fase-4-agent-discovery-e-routing-intelligente>6.4 Fase 4: Agent Discovery e Routing Intelligente</a><ul><li><a href=#641-recupero-agent-card-dallagent-registry>6.4.1 Recupero Agent Card dall&rsquo;Agent Registry</a></li><li><a href=#642-routing-llm-per-selezione-agenti>6.4.2 Routing LLM per Selezione Agenti</a></li><li><a href=#643-decisione-per-debate-strutturato>6.4.3 Decisione per Debate Strutturato</a></li></ul></li><li><a href=#65-fase-5-round-1---analisi-iniziali>6.5 Fase 5: Round 1 - Analisi Iniziali</a><ul><li><a href=#651-valuation-agent---round-1>6.5.1 Valuation Agent - Round 1</a></li><li><a href=#652-sentiment-agent---round-1>6.5.2 Sentiment Agent - Round 1</a></li><li><a href=#653-fundamental-agent---round-1>6.5.3 Fundamental Agent - Round 1</a></li></ul></li><li><a href=#66-round-2-del-debate>6.6 Round 2 del Debate</a><ul><li><a href=#661-dibattito>6.6.1 Dibattito</a></li><li><a href=#662-processo-di-consensus-building>6.6.2 Processo di Consensus Building</a></li></ul></li><li><a href=#67-fase-7-consolidamento-finale-e-report-generation>6.7 Fase 7: Consolidamento Finale e Report Generation</a><ul><li><a href=#671-llm-based-synthesis>6.7.1 LLM-based Synthesis</a></li><li><a href=#672-report-finale>6.7.2 Report Finale</a></li><li><a href=#673-metadata-del-processo-di-debate>6.7.3 Metadata del Processo di Debate</a></li></ul></li><li><a href=#68-performance-e-tempi-di-esecuzione>6.8 Performance e Tempi di Esecuzione</a><ul><li><a href=#681-durata-complessiva>6.8.1 Durata Complessiva</a></li><li><a href=#682-breakdown-temporale-per-fasi>6.8.2 Breakdown Temporale per Fasi</a></li><li><a href=#683-analisi-delle-componenti-pi√π-costose>6.8.3 Analisi delle Componenti pi√π Costose</a></li><li><a href=#684-bottlenecks-e-ottimizzazioni-possibili>6.8.4 Bottlenecks e Ottimizzazioni Possibili</a></li></ul></li></ul><ul><li><a href=#71-motivazioni-e-obiettivi-del-progetto>7.1 Motivazioni e Obiettivi del Progetto</a></li><li><a href=#72-la-scelta-di-alphaagents>7.2 La Scelta di AlphaAgents</a></li><li><a href=#73-sviluppi-futuri>7.3 Sviluppi Futuri</a><ul><li><a href=#741-miglioramenti-tecnici>7.4.1 Miglioramenti Tecnici</a></li><li><a href=#742-espansioni-funzionali>7.4.2 Espansioni Funzionali</a></li></ul></li><li><a href=#75-considerazioni-sui-risultati-finanziari>7.5 Considerazioni sui Risultati Finanziari</a><ul><li><a href=#751-limitazioni-e-rischi>7.5.1 Limitazioni e Rischi</a></li><li><a href=#752--disclaimer-importante>7.5.2 ‚ö†Ô∏è Disclaimer Importante</a></li></ul></li></ul></nav></div></div><div class=content id=content><h1 id=1-introduzione>1. Introduzione</h1><p>La quantit√† di framework che sta nascendo per lo sviluppo di applicazioni di GenAI √® incredibile e a mio avviso inizia ad essere pure eccessiva.
Ogniqualvolta salta fuori un nuovo framework, mi sembra che faccia pi√π o meno le stesse cose di quello precedente. Magari alcuni hanno una capacit√† di modularizzazione migliore, oppure un disegno pi√π robusto contro l&rsquo;obsolescenza nel lungo periodo, ma pi√π o meno mi sembrano tutti gli stessi e, sebbene mi piaccia sperimentare, lo studio di nuovi mirabolanti e promettenti framework di GenAI comincia ad appassionarmi sempre meno.</p><p>Tanto per capirci, qualche giorno fa, mi sono imbattuto in <a href=https://mozilla-ai.github.io/any-agent/ target=_blank rel="noopener noreffer">AnyAgent</a>: l&rsquo;ennesimo framework che fa da wrapper verso altri framework!<br>Nello specifico, non voglio essere frainteso, il lavoro che sta facendo il team di Mozilla in ambito AI √® encomiabile e consiglio anche una lettura del loro <a href=https://blog.mozilla.ai/ target=_blank rel="noopener noreffer">blog</a>, che pubblica articoli molto interessanti, ma questo genere di sovrastrutture <em>Kafkiane</em> mi sembra che introduca pi√π problemi di quelli che risolva perch√© ogni stratificazione complica la manutenibilit√† del software nel lungo periodo, senza contare tutti i problemi di dipendenze, compatibilit√† e aggiornamenti.</p><p>Trovo inoltre inutilmente dispendioso specializzarmi sull&rsquo;uno framework o sull&rsquo;altro in maniera verticale, sia per una questione di lock-in, ma anche per non perdere quella capacit√† di astrazione che mi serve nel disegnare una soluzione end-to-end.</p><p>Un altro tema su cui quasi tutti i framework stanno dimostrando le loro limitazioni √® nel <strong>supporto al multi-agent</strong>.
I primissimi framework per lo sviluppo di GenAI si concentravano principalmente sul wrapping degli LLM, sul tracing e sul chaining, mentre ora la maggior parte dell&rsquo;attenzione √® rivolta alle funzionalit√† <em>agentiche</em> (odio questa parola), ma nella stragrande maggioranza dei casi, la progettazione originale dei framework √® rimasta la stessa.</p><p>La maggior parte di questi framework √® infatti ancora <strong>monolitica</strong>, il che rende <strong>difficile realizzare una vera applicazione multi-agente</strong> senza essere vincolati al framework specifico e al runtime sottostante.</p><p>Ed √® qui che entra in gioco A2A (Agent-to-Agent). Il protocollo A2A mira a consentire una comunicazione e collaborazione fluida tra agenti, indipendentemente dal framework o runtime utilizzato, tramite formati di messaggistica e protocolli di trasporto standardizzati.
Piuttosto che proseguire nello studio o approfondimento di questo o quell&rsquo;altro framework, ho deciso di <strong>prendere sul serio il protocollo A2A</strong> e cercare di realizzare una soluzione applicativa end-to-end, compatibile con questo standard.</p><p>Il primo passo era quello di risolvere il problema della discovery e nel <a href=https://c-daniele.github.io/en/posts/2025-08-15-agent-reg-for-a2a/ target=_blank rel="noopener noreffer">mio post precedente</a> ho descritto come costruire un semplice Agent Registry che si adatta bene al protocollo A2A.</p><p>In seguito, volevo buttarmi su un caso d&rsquo;uso concreto, quindi ho cercato qualche applicazione interessante da affrontare con la mia nuova architettura Multi-Agent A2A-compliant.
Mi sono quindi imbattuto per caso nel paper <a href=https://arxiv.org/abs/2508.11152v1 target=_blank rel="noopener noreffer">AlphaAgents</a>, pubblicato pochi giorni fa su arXiv dal team di BlackRock.</p><p>Il paper descrive un approccio di collaborazione multi-agente per <strong>supportare la stock selection e l&rsquo;analisi finanziaria a partire da un set di titoli</strong>.
Ho pensato che fosse un caso d&rsquo;uso perfetto e mi ci sono buttato!
Sfortunatamente, il team BlackRock non ha rilasciato il codice sorgente, quindi ho dovuto implementare l&rsquo;intera soluzione AlphaAgent <a href=https://github.com/c-daniele/alpha-agents-a2a target=_blank rel="noopener noreffer">da solo</a>, utilizzando il paper come specifica di alto livello.
Ho comunque dovuto fare alcune assunzioni e semplificazioni, ad esempio i tool di estrazione e sintesi delle informazioni dell&rsquo;agente che fa le analisi fondamentali non si basano realmente su RAG, ma piuttosto su tecniche molto banali di lookup tramite parole chiave o prefissi a partire dai dati restituiti da Yahoo Finance. Di conseguenza, l&rsquo;implementazione non √® conforme al 100% a quanto descritto nel paper, ma pu√≤ essere un valido punto di partenza.
In ogni caso, il mio focus √® stato pi√π sull&rsquo;architettura che sull&rsquo;affidabilit√† della risposta dei singoli agenti. Ho cercato inoltre di avere una visione agnostica rispetto al framework GenAI sottostante, dove l&rsquo;agente orchestratore pu√≤ <strong>ricercare e selezionare gli agenti specializzati a runtime</strong>, ignorando completamente i dettagli sottostanti in termini di modelli, linguaggi e librerie.</p><p>Nei capitoli che seguono, faccio un breve recap di cos&rsquo;√® AlphaAgents e come funziona in teoria, descrivo dunque l&rsquo;architettura della mia implementazione A2A-compliant e alcuni dettagli tecnici e poi mostrer√≤ cosa accade durante i singoli step di una esecuzione concreta.</p><p>Aggiungo anche un disclaimer probabilmente ovvio ma doveroso: l&rsquo;output del sistema √® da intendersi come puramente dimostrativo ai fini della soluzione multi-agent e <strong>non deve essere considerato in alcun modo come input per qualsiasi tipo di decisione finanziaria</strong>.
Aggiungo inoltre che, sebbene abbia fatto qualche controllo puntuale di coerenza sui KPI calcolati, rilevando risultati pi√π o meno in linea con le aspettatove, <strong>non √® stato fatto un controllo approfondito e rigoroso</strong> della validit√† dei risultati. Non escludo dunque la possibilit√† di errori sistematici o ri-formulazioni delle risposte condizionate da allucinazioni dell&rsquo;LLM.</p><h1 id=2-breve-introduzione-su-alphaagents>2. Breve introduzione su AlphaAgents</h1><p>Il paper <a href=https://arxiv.org/abs/2508.11152v1 target=_blank rel="noopener noreffer">AlphaAgents</a> introduce un approccio innovativo al problema della selezione di titoli azionari attraverso un sistema multi-agente basato su Large Language Models (LLM).</p><h2 id=21-il-problema-e-la-soluzione>2.1 Il problema e la soluzione</h2><p>Le analisi di portafoglio tradizionali richiedono un notevole sforzo umano per processare enormi quantit√† di dati eterogenee: documenti SEC (10-K, 10-Q), trascrizioni di earnings call, target price, ratio finanziari, news di mercato e ricerche settoriali. Questo processo presenta inoltre significative sfide in termini di scalabilit√† e obiettivit√†. Uno dei rischi citati pi√π volte nel paper √® infatti quello di propendere verso allocazioni sub-ottimali a causa di <strong>fattori soggettivi come l&rsquo;avversione al rischio</strong> o l&rsquo;eccessiva confidenza nelle proprie intuizioni.</p><p>Gli AlphaAgents affrontano questi problemi attraverso un framework multi-agente che <strong>incorpora alcune tecniche di adversarial reasoning</strong> e che suddivide l&rsquo;analisi finanziaria in aree di specializzazione distinte, ciascuna gestita da un agente dedicato.</p><h2 id=22-i-tre-agenti>2.2 I tre agenti</h2><p><strong>Fundamental Agent</strong>: Si occupa dell&rsquo;analisi fondamentale tradizionale, esaminando in profondit√† i bilanci, i flussi di cassa e le performance finanziarie attraverso l&rsquo;analisi di documenti SEC e report finanziari.</p><p><strong>Sentiment Agent</strong>: Analizza il sentiment di mercato attraverso l&rsquo;elaborazione di news finanziarie, cambiamenti nei rating degli analisti e disclosure aziendali per valutare l&rsquo;impatto potenziale sui prezzi delle azioni.</p><p><strong>Valuation Agent</strong>: Si concentra sull&rsquo;analisi tecnica e quantitativa, processando dati storici di prezzi e volumi per calcolare metriche di volatilit√†, rendimenti corretti per il rischio e indicatori di valutazione.</p><h2 id=23-il-meccanismo-di-collaborazione-e-debate>2.3 Il meccanismo di collaborazione e debate</h2><p>Il framework implementa un meccanismo di coordinamento centralizzato attraverso un <strong>Group Chat Agent</strong> che gestisce l&rsquo;interazione tra gli agenti specializzati. Questo agente coordinatore:</p><ol><li><strong>Instrada le richieste</strong> verso gli agenti pi√π appropriati in base al tipo di analisi richiesta usando un approccio basato sull&rsquo;LLM</li><li><strong>Gestisce il processo di debate strutturato</strong> implementando un approccio di tipo &ldquo;round-robin&rdquo;</li><li><strong>Garantisce la partecipazione equa</strong> assicurando che ogni agente parli almeno due volte durante il debate</li><li><strong>Facilita la convergenza</strong> attraverso un sistema di consensus building che prevede la condivisione dei risultati intermedi con tutti gli agenti</li><li><strong>Sintetizza le analisi</strong> multiple in un report coerente che evidenzia il processo di debate</li><li><strong>Mitiga le allucinazioni</strong> attraverso il confronto cross-agent e la validazione collaborativa</li></ol><p>Ricapitolando in poche parole: gli agenti si confrontano in turni sequenziali fino al raggiungimento del consenso, eliminando il rischio che alcuni agenti dominino la discussione.</p><div class=mermaid id=id-1></div><h2 id=24-gestione-intelligente-del-risk-tolerance>2.4 Gestione Intelligente del Risk Tolerance</h2><p>Un aspetto innovativo del framework √® l&rsquo;incorporamento di profili di tolleranza al rischio indicati dall&rsquo;utente. Nel paper non √® indicato precisamente in che modo il team di BlackRock ha implemetato l&rsquo;introduzione di questi profili, ma ipotizzo che abbiano utilizzato dei meccanismi di prompting per <strong>inferire automaticamente</strong> il livello di rischio dalla query dell&rsquo;utente.
Partendo da questa analisi sulla query utente, viene dunque estrapolata una indicazione precisa del profilo di rischio desiderato, che poi viene utilizzata in tutte le interazioni con gli agenti.</p><p>Questo semplice accorgimento, consente dunque di aggiungere un livello di personalizzazione alle raccomandazioni fornite dagli agenti.</p><h3 id=241-classificazione-dei-profili-di-rischio>2.4.1 Classificazione dei Profili di Rischio</h3><ul><li><strong>Risk-averse</strong>: Investitori conservativi che prioritizzano la conservazione del capitale, ricerca di rendimenti stabili, azioni dividend-paying, bassa volatilit√†, approccio safety-first</li><li><strong>Risk-neutral</strong>: Investitori bilanciati che cercano crescita moderata con rischio ragionevole, portafogli diversificati, esposizione di mercato standard</li><li><strong>Risk-seeking</strong>: Investitori aggressivi che perseguono rendimenti elevati, accettano alta volatilit√†, azioni growth, investimenti speculativi</li></ul><h3 id=242-esempi-di-classificazione-automatica>2.4.2 Esempi di Classificazione Automatica</h3><div class="code-block code-line-numbers" style="counter-reset:code-block 0"><div class="code-header language-plaintext"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title="Copia negli appunti"><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-plaintext data-lang=plaintext><span class=line><span class=cl>üü¢ Risk-Averse (Conservativo):
</span></span><span class=line><span class=cl>&#34;Sto cercando investimenti sicuri e stabili per la mia pensione&#34;
</span></span><span class=line><span class=cl>&#34;Cerco azioni sicure con dividendi regolari&#34;
</span></span><span class=line><span class=cl>&#34;Voglio preservare il mio capitale senza rischi&#34;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>üü° Risk-Neutral (Bilanciato):  
</span></span><span class=line><span class=cl>&#34;Dovrei investire in Tesla? Voglio un&#39;analisi equilibrata&#34;
</span></span><span class=line><span class=cl>&#34;Devo investire in azioni Apple?&#34;
</span></span><span class=line><span class=cl>&#34;Analisi delle azioni Microsoft per il mio portafoglio&#34;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>üî¥ Risk-Seeking (Aggressivo):
</span></span><span class=line><span class=cl>&#34;Voglio azioni ad alta crescita anche se volatili&#34;
</span></span><span class=line><span class=cl>&#34;Voglio rendimenti massimi, posso gestire un rischio elevato&#34;
</span></span><span class=line><span class=cl>&#34;Cerco investimenti ad alto potenziale&#34;</span></span></code></pre></div></div><h3 id=243-integrazione-nel-processo-di-debate>2.4.3 Integrazione nel Processo di Debate</h3><p>Il profilo di rischio viene dunque:</p><ul><li><strong>Passato a tutti gli agenti specializzati</strong> tramite metadati nel messaggio JSON-RPC</li><li><strong>Mantenuto durante tutto il debate</strong> per coerenza delle raccomandazioni</li><li><strong>Registrato nei log</strong> per trasparenza del processo decisionale</li><li><strong>Utilizzato per personalizzare</strong> le analisi di ciascun agente specialist</li></ul><h2 id=25-vantaggi-dellapproccio-multi-agente-con-debate-strutturato>2.5 Vantaggi dell&rsquo;approccio multi-agente con debate strutturato</h2><p>Il sistema offre diversi benefici rispetto all&rsquo;analisi tradizionale:</p><ul><li><strong>Mitigazione dei bias</strong>: Ogni agente opera in modo indipendente, riducendo l&rsquo;impatto dei bias cognitivi umani</li><li><strong>Partecipazione equa</strong>: Il meccanismo di turn-taking consente a tutti gli agenti di contribuire in modo equo</li><li><strong>Validazione collaborativa</strong>: Le posizioni individuali vengono sottoposte a &ldquo;challenge&rdquo; e raffinate attraverso il confronto diretto</li><li><strong>Convergenza guidata</strong>: Il sistema di consensus building porta a decisioni pi√π robuste e ponderate</li><li><strong>Personalizzazione automatica</strong>: Risk tolerance inferito automaticamente per analisi su misura</li><li><strong>Adattamento multilingue</strong>: Sistema nativo per utenti di qualsiasi lingua senza configurazione</li><li><strong>Scalabilit√†</strong>: Capacit√† di processare volumi molto maggiori di informazioni</li><li><strong>Specializzazione</strong>: Ogni agente pu√≤ sviluppare expertise approfondita nel proprio dominio</li><li><strong>Flessibilit√†</strong>: Il framework pu√≤ essere esteso con agenti aggiuntivi (es. Technical Analysis Agent, Macro Economist Agent)</li></ul><h1 id=3-punto-di-partenza>3. Punto di partenza</h1><p>Per realizzare il codice, ho fatto ampio uso di Claude Code, ma ho dedicato una quantit√† di tempo rilevante per la definizione delle specifiche tecniche di dettaglio rispetto a ci√≤ che avevo in mente dopo aver letto il paper (es: struttura delle classi, gestione dei tool, etc), nonch√© per il testing e la modifica o la revisione di alcune classi e metodi.</p><p>Premesso che ciascun agente potrebbe essere implementato in modo indipendente, mi sono basato per semplicit√† sul seguente ecosistema:</p><ul><li>Runtime: Python3.12</li><li>Package manager: uv</li><li>GenAI Framework: Langchain Agents (ma potrebbe essere sostituito con un altro framework tipo Autogen, CrewAI, Smolagents, etc)</li><li>Serving Layer: FastAPI</li><li>Protocollo di comunicazione: JSON-RPC</li><li>Test: semplici script python rilanciabili</li><li>Architettura basata sull&rsquo;Agent Registry, con discovery dynamica dell&rsquo;Agent Card per ciascun agente</li><li>LLM: per semplicit√† ho utilizzato GPT-4o, senza farmi troppi problemi sulla scelta del modello</li></ul><p>Nei capitoli che seguono, illustro dettagliatamente l&rsquo;architettura e l&rsquo;implementazione. Ovviamente, uno degli step propedeutici √® stato anche quello di corredare ciascun agente anche di un endpoint in cui esporre la Agent Card secondo il solito path &ldquo;<em>.well-known/agent-card</em>&rdquo; e registrare gli agenti all&rsquo;interno dell&rsquo;Agent Registry (Figura 1)</p><table><thead><tr><th style=text-align:center><a href=/images/2025/add-val-agent.png><img src=/images/2025/add-val-agent.png alt="Figura 1 - Aggiunta del Valuation Agent"></a></th></tr></thead><tbody><tr><td style=text-align:center><em>Figura 1 - Aggiunta del Valuation Agent</em></td></tr></tbody></table><h1 id=4-design-di-alto-livello>4. Design di alto livello</h1><p>L&rsquo;architettura √® abbastanza semplice: si tratta di:</p><ul><li>1 Agent Registry che gestisce la registrazione e la discovery degli agenti (si tratta del modulo che ho discusso nel <a href=https://c-daniele.github.io/it/posts/2025-08-15-agent-reg-for-a2a/ target=_blank rel="noopener noreffer">mio precedente articolo</a>)</li><li>3 agenti specializzati, ciascuno in esecuzione su un host e una porta specifica (nel mio caso, localhost e porte 3001-3003)</li><li>1 agente di orchestrazione, che riceve gli input dell&rsquo;utente, richiama gli altri agenti e produce la risposta finale.</li></ul><h2 id=41-architettura-logica-complessiva>4.1 Architettura Logica Complessiva</h2><p>Ho lanciato tutti gli agenti in locale e configurato le Agent Card di conseguenza, ma ovviamente il sistema √® progettato per supportare anche deployment distribuiti.</p><div class=mermaid id=id-2></div><h2 id=42-processo-di-registrazione>4.2 Processo di registrazione</h2><p>Nel mio caso, ho eseguito manualmente la registrazione sull&rsquo;agent registry (Figura 1), tuttavia il processo potrebbe tranquillamente essere automatizzato. In sostanza, ogni Agent che vuole essere pubblicato all&rsquo;interno dell&rsquo;organizzazione potrebbe registrarsi autonomamente sull&rsquo;Agent Registry.</p><p>Sia nel caso di registrazione manuale che automatica, il Group Chat Agent pu√≤ in seguito interrogare l&rsquo;Agent Registry e scoprire gli agenti specializzati necessari per rispondere a una richiesta dell&rsquo;utente e decidere come orchestrare la comunicazione tra di essi.</p><div class=mermaid id=id-3></div><h2 id=43-agent-card>4.3 Agent Card</h2><p>Ogni agente espone le proprie capabilities attraverso un Agent Card conforme allo schema A2A. Per esempio, ecco come si presenta l&rsquo;Agent Card per il Fundamental Agent:</p><div class="code-block code-line-numbers" style="counter-reset:code-block 0"><div class="code-header language-json"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title="Copia negli appunti"><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;Fundamental Analysis Agent&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;description&#34;</span><span class=p>:</span> <span class=s2>&#34;Specialized agent for fundamental equity analysis. Analyzes 10-K and 10-Q financial reports, financial statements, and company fundamentals to assess stock value and projected trajectory. Provides qualitative and quantitative analysis of a company&#39;s financial performance, cash flow, operations, gross margins, and progress towards stated objectives.&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;version&#34;</span><span class=p>:</span> <span class=s2>&#34;1.0.0&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;protocolVersion&#34;</span><span class=p>:</span> <span class=s2>&#34;0.3.0&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;url&#34;</span><span class=p>:</span> <span class=s2>&#34;http://0.0.0.0:3003/&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;preferredTransport&#34;</span><span class=p>:</span> <span class=s2>&#34;JSONRPC&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;provider&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;organization&#34;</span><span class=p>:</span> <span class=s2>&#34;AlphaAgents Financial&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;url&#34;</span><span class=p>:</span> <span class=s2>&#34;https://AlphaAgents-dummy-corp.ai&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;capabilities&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;streaming&#34;</span><span class=p>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;pushNotifications&#34;</span><span class=p>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;stateTransitionHistory&#34;</span><span class=p>:</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;defaultInputModes&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;text/plain&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;application/json&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;application/pdf&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;defaultOutputModes&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;text/plain&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;application/json&#34;</span>
</span></span><span class=line><span class=cl>  <span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;skills&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;id&#34;</span><span class=p>:</span> <span class=s2>&#34;fundamental_analysis&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;Fundamental Financial Analysis&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;description&#34;</span><span class=p>:</span> <span class=s2>&#34;Performs comprehensive fundamental analysis of stocks using 10-K and 10-Q reports. Analyzes financial statements, cash flow, income statements, balance sheets, operations, gross margins, and company progress towards objectives. Provides buy/sell/hold recommendations based on fundamental metrics and risk tolerance.&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;tags&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;financial-analysis&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;10k-reports&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;10q-reports&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;financial-statements&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;cash-flow-analysis&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;fundamental-research&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;equity-valuation&#34;</span>
</span></span><span class=line><span class=cl>      <span class=p>],</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;examples&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;Analyze Apple&#39;s latest 10-K report and provide a fundamental analysis with recommendation&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;Evaluate Microsoft&#39;s cash flow trends and operational efficiency from recent financial filings&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;Compare Tesla&#39;s fundamental metrics against industry benchmarks and provide investment recommendation&#34;</span>
</span></span><span class=line><span class=cl>      <span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;id&#34;</span><span class=p>:</span> <span class=s2>&#34;financial_report_extraction&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;Financial Report Data Extraction&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;description&#34;</span><span class=p>:</span> <span class=s2>&#34;Extracts and processes key financial data from 10-K and 10-Q SEC filings. Uses RAG capabilities to retrieve relevant sections and perform targeted analysis on specific financial metrics, ratios, and disclosures.&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;tags&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;data-extraction&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;sec-filings&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;financial-metrics&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;rag-analysis&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;document-processing&#34;</span>
</span></span><span class=line><span class=cl>      <span class=p>],</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;examples&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;Extract revenue growth metrics from the latest quarterly report&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;Pull debt-to-equity ratios and leverage analysis from annual filing&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;Identify key risk factors mentioned in the 10-K management discussion&#34;</span>
</span></span><span class=line><span class=cl>      <span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;id&#34;</span><span class=p>:</span> <span class=s2>&#34;risk_assessment&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;Fundamental Risk Assessment&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;description&#34;</span><span class=p>:</span> <span class=s2>&#34;Assesses fundamental risks based on financial health indicators, debt levels, cash flow stability, competitive positioning, and management guidance. Tailors analysis to different risk tolerance profiles (risk-averse, risk-neutral).&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;tags&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;risk-assessment&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;financial-health&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;debt-analysis&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;competitive-analysis&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;risk-tolerance&#34;</span>
</span></span><span class=line><span class=cl>      <span class=p>],</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;examples&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;Assess the fundamental risk profile of Netflix given current debt levels and competitive pressures&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;Evaluate Amazon&#39;s financial stability risks for risk-averse investors&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;Analyze fundamental downside risks for Google&#39;s cloud business segment&#34;</span>
</span></span><span class=line><span class=cl>      <span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;additionalInterfaces&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;url&#34;</span><span class=p>:</span> <span class=s2>&#34;http://0.0.0.0:3003/&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;transport&#34;</span><span class=p>:</span> <span class=s2>&#34;JSONRPC&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>]</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div></div><h2 id=44-flusso-di-analisi-end-to-end>4.4 Flusso di Analisi End-to-End</h2><p>Il processo di analisi prevede che l&rsquo;orchestratore (il group chat) esegua un <strong>sistema di routing intelligente</strong> basato su LLM che:</p><ul><li><strong>Rileva automaticamente</strong> se la query richiede un debate strutturato (decisioni di investimento) o semplice coordinamento (query informative)</li><li><strong>Determina quali agenti coinvolgere</strong> per svolgere l&rsquo;analisi di dettaglio usando analisi semantica multilingue</li><li><strong>Gestisce il processo di debate Round Robin</strong> quando necessario, garantendo come minimo 2 turni per agente</li></ul><p>Per le domande che riguardano <strong>decisioni di investimento</strong>, il sistema attiva il <strong>meccanismo di debate strutturato</strong>:</p><ol><li><strong>Round iniziale</strong>: Ogni agente presenta la sua posizione iniziale sequenzialmente</li><li><strong>Debate rounds</strong>: Gli agenti si confrontano in turni, presentando controargomentazioni</li><li><strong>Consensus check</strong>: Verifica del 75% di accordo dopo ogni round</li><li><strong>Participation enforcement</strong>: Garantisce minimo 2 turni per agente</li><li><strong>Synthesis finale</strong>: Consolida le posizioni finali evidenziando il processo di debate</li></ol><p>Per le <strong>query informative</strong>, il sistema usa <strong>coordinamento parallelo tradizionale</strong> per massimizzare velocit√† e efficienza.</p><div class=mermaid id=id-4></div><h2 id=45-transport-layer-e-messaging-protocol>4.5 Transport Layer e Messaging Protocol</h2><p>Tutto il traffico tra agenti utilizza il protocollo JSON-RPC conforme ad A2A:</p><p><strong>Request Format:</strong></p><div class="code-block code-line-numbers" style="counter-reset:code-block 0"><div class="code-header language-json"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title="Copia negli appunti"><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;jsonrpc&#34;</span><span class=p>:</span> <span class=s2>&#34;2.0&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;method&#34;</span><span class=p>:</span> <span class=s2>&#34;message/send&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;params&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;message&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;kind&#34;</span><span class=p>:</span> <span class=s2>&#34;message&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;messageId&#34;</span><span class=p>:</span> <span class=s2>&#34;uuid&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;role&#34;</span><span class=p>:</span> <span class=s2>&#34;user&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;parts&#34;</span><span class=p>:</span> <span class=p>[{</span><span class=nt>&#34;kind&#34;</span><span class=p>:</span> <span class=s2>&#34;text&#34;</span><span class=p>,</span> <span class=nt>&#34;text&#34;</span><span class=p>:</span> <span class=s2>&#34;Analyze AAPL&#34;</span><span class=p>}],</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;contextId&#34;</span><span class=p>:</span> <span class=s2>&#34;uuid&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;taskId&#34;</span><span class=p>:</span> <span class=s2>&#34;uuid&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;metadata&#34;</span><span class=p>:</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;id&#34;</span><span class=p>:</span> <span class=s2>&#34;uuid&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div></div><p><strong>Response Format:</strong></p><div class="code-block code-line-numbers" style="counter-reset:code-block 0"><div class="code-header language-json"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title="Copia negli appunti"><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;jsonrpc&#34;</span><span class=p>:</span> <span class=s2>&#34;2.0&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;result&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;kind&#34;</span><span class=p>:</span> <span class=s2>&#34;message&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=nt>&#34;messageId&#34;</span><span class=p>:</span> <span class=s2>&#34;uuid&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;role&#34;</span><span class=p>:</span> <span class=s2>&#34;agent&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;parts&#34;</span><span class=p>:</span> <span class=p>[{</span><span class=nt>&#34;kind&#34;</span><span class=p>:</span> <span class=s2>&#34;text&#34;</span><span class=p>,</span> <span class=nt>&#34;text&#34;</span><span class=p>:</span> <span class=s2>&#34;Analysis results...&#34;</span><span class=p>}],</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;contextId&#34;</span><span class=p>:</span> <span class=s2>&#34;uuid&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;metadata&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;analysis_type&#34;</span><span class=p>:</span> <span class=s2>&#34;fundamental&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;confidence_score&#34;</span><span class=p>:</span> <span class=mf>0.85</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;id&#34;</span><span class=p>:</span> <span class=s2>&#34;uuid&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div></div><h1 id=5-implementazione>5. Implementazione</h1><p>L&rsquo;implementazione di AlphaAgents √® stata realizzata con un focus sulla modularit√†, testabilit√† e conformit√† al protocollo A2A. Ogni agente √® un&rsquo;applicazione indipendente con le proprie dipendenze e pu√≤ essere deployato separatamente.</p><p><strong>Nota sull&rsquo;implementazione</strong>: Come menzionato nell&rsquo;introduzione, l&rsquo;implementazione differisce dal paper originale in alcuni aspetti tecnici. In particolare:</p><ul><li>Il <strong>Sentiment Agent</strong> utilizza le librerie VADER e TextBlob che dovrebbero rappresentare una soluzione semplice ma efficace poich√© verosimilmente le news saranno esclusivamente in lingua inglese e non richiederanno una comprensione profonda del contesto. In futuro si potrebbero integrare modelli pi√π sofisticati di sentiment analysis basati su LLM o modelli specifici come FinBERT.</li><li>Il <strong>Fundamental Agent</strong> impiega keyword matching sui dati di Yahoo Finance invece di vere tecniche RAG con vector databases</li><li>In generale, mi sono focalizzato sull&rsquo;architettura piuttosto che sulle performance specifiche dei singoli agenti</li></ul><p>Tutto il codice √® <a href=https://github.com/c-daniele/alpha-agents-a2a target=_blank rel="noopener noreffer">disponibile su GitHub</a>.</p><h2 id=51-stack-tecnologico-e-dependencies>5.1 Stack Tecnologico e Dependencies</h2><p>Il progetto utilizza <strong>Python 3.12</strong> come runtime con <strong>uv</strong> come package manager per gestione rapida delle dependencies. Di seguito un estratto del file di configurazione per dare una idea delle dipendenze:</p><div class="code-block code-line-numbers" style="counter-reset:code-block 0"><div class="code-header language-toml"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title="Copia negli appunti"><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-toml data-lang=toml><span class=line><span class=cl><span class=c># pyproject.toml - Global Dependencies</span>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=nx>project</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=nx>name</span> <span class=p>=</span> <span class=s2>&#34;alpha_agents&#34;</span>
</span></span><span class=line><span class=cl><span class=nx>version</span> <span class=p>=</span> <span class=s2>&#34;0.1.0&#34;</span>
</span></span><span class=line><span class=cl><span class=nx>requires-python</span> <span class=p>=</span> <span class=s2>&#34;&gt;=3.12&#34;</span>
</span></span><span class=line><span class=cl><span class=nx>dependencies</span> <span class=p>=</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;langchain&gt;=0.3.27&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;langchain-openai&gt;=0.3.32&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;langchain-community&gt;=0.3.28&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;openai&gt;=1.102.0&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;yfinance&gt;=0.2.65&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;pandas&gt;=2.3.2&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;numpy&gt;=2.3.2&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;fastapi&gt;=0.116.1&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;uvicorn&gt;=0.35.0&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;pydantic&gt;=2.11.7&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;python-dotenv&gt;=1.1.1&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;httpx&gt;=0.28.1&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;aiohttp&gt;=3.12.15&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;requests&gt;=2.32.5&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;beautifulsoup4&gt;=4.13.5&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;feedparser&gt;=6.0.11&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;newspaper3k&gt;=0.2.8&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;textblob&gt;=0.18.0&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;vaderSentiment&gt;=3.3.2&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;python-dateutil&gt;=2.9.0&#34;</span>
</span></span><span class=line><span class=cl><span class=p>]</span></span></span></code></pre></div></div><h2 id=52-struttura-del-progetto>5.2 Struttura del Progetto</h2><p>Di seguito una panoramica della struttura del progetto:</p><div class="code-block code-line-numbers" style="counter-reset:code-block 0"><div class="code-header language-plaintext"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title="Copia negli appunti"><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-plaintext data-lang=plaintext><span class=line><span class=cl>alpha-agents-implementation/
</span></span><span class=line><span class=cl>‚îú‚îÄ‚îÄ agents/
</span></span><span class=line><span class=cl>‚îÇ   ‚îú‚îÄ‚îÄ groupchat-agent/          # Orchestratore principale
</span></span><span class=line><span class=cl>‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ src/groupchat_agent/
</span></span><span class=line><span class=cl>‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ a2a_agent.py      # Logica coordinamento
</span></span><span class=line><span class=cl>‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ registry_service.py # Client Agent Registry
</span></span><span class=line><span class=cl>‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ server.py         # FastAPI server
</span></span><span class=line><span class=cl>‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ pyproject.toml
</span></span><span class=line><span class=cl>‚îÇ   ‚îú‚îÄ‚îÄ fundamental-agent/        # Analisi fondamentale
</span></span><span class=line><span class=cl>‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ src/fundamental_agent/
</span></span><span class=line><span class=cl>‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ agent.py          # Langchain agent
</span></span><span class=line><span class=cl>‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ tools.py          # SEC/Finance tools
</span></span><span class=line><span class=cl>‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ server.py         # A2A endpoint
</span></span><span class=line><span class=cl>‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ pyproject.toml
</span></span><span class=line><span class=cl>‚îÇ   ‚îú‚îÄ‚îÄ sentiment-agent/          # Analisi sentiment
</span></span><span class=line><span class=cl>‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ src/sentiment_agent/
</span></span><span class=line><span class=cl>‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ agent.py          # Langchain agent
</span></span><span class=line><span class=cl>‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ tools.py          # News collection / Sentiment Analysis
</span></span><span class=line><span class=cl>‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ server.py         # A2A endpoint
</span></span><span class=line><span class=cl>‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ pyproject.toml
</span></span><span class=line><span class=cl>‚îÇ   ‚îî‚îÄ‚îÄ valuation-agent/          # Analisi quantitativa
</span></span><span class=line><span class=cl>‚îÇ       ‚îî‚îÄ‚îÄ src/valuation_agent/
</span></span><span class=line><span class=cl>‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ agent.py          # Langchain agent
</span></span><span class=line><span class=cl>‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ tools.py          # Stock data collection / KPI calculation
</span></span><span class=line><span class=cl>‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ server.py         # A2A endpoint
</span></span><span class=line><span class=cl>‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ pyproject.toml</span></span></code></pre></div></div><h2 id=53-implementazione-del-group-chat-agent>5.3 Implementazione del Group Chat Agent</h2><p>Il <strong>Group Chat Agent</strong> √® il cuore e l&rsquo;entry point del sistema, implementato nella classe <code>A2AGroupChatAgent</code>. Le sue responsabilit√† principali includono:</p><ol><li><strong>Rilevamento intelligente del debate</strong>: Usa LLM per determinare se la query richiede debate strutturato</li><li><strong>Inferenza automatica del risk tolerance</strong>: Analizza il messaggio utente per identificare il profilo di rischio</li><li><strong>Routing multilingue</strong>: Identifica agenti necessari indipendentemente dalla lingua della query</li><li><strong>Orchestrazione del debate</strong>: Gestisce la partecipazione equa tramite un sistema di turni round-robin</li><li><strong>Consensus monitoring</strong>: Verifica accordo e termina il debate quando appropriato</li><li><strong>Metadata enhancement</strong>: Arricchisce automaticamente i metadati con risk_tolerance per tutti gli agenti</li></ol><h3 id=531-inferenza-del-risk-tolerance>5.3.1 Inferenza del Risk Tolerance</h3><p>Il sistema utilizza un <strong>classificatore basato su LLM</strong> che analizza il messaggio utente per estrapolare il profilo di rischio. Le linee guida per la classificazione includono:</p><ol><li><strong>Preferenze esplicite di rischio</strong>: Termini come &ldquo;conservativo&rdquo;, &ldquo;aggressivo&rdquo;, &ldquo;alta crescita&rdquo;, &ldquo;sicuro&rdquo;, &ldquo;stabile&rdquo;</li><li><strong>Timeframe di investimento</strong>: Menzioni di &ldquo;pensionamento&rdquo;, &ldquo;lungo termine&rdquo;, &ldquo;guadagni rapidi&rdquo;</li><li><strong>Analisi del vocabolario</strong>: Scelte linguistiche e tono (cauto vs confidente vs speculativo)</li><li><strong>Tipi di asset menzionati</strong>: Bond/dividendi = averse, growth stock = seeking</li><li><strong>Supporto multilingue</strong>: Funziona in qualsiasi lingua analizzando intento e segnali di rischio</li></ol><p>Come ho anticipato in precedenza, non ho idea di come abbiano fatto i ricercatori di BlackRock per identificare il profilo di rischio. Tuttavia, √® facile immaginare che abbiano fatto qualcosa di simile.</p><h3 id=532-estratto-del-codice>5.3.2 Estratto del codice</h3><p>Di seguito un estratto della classe <code>A2AGroupChatAgent</code> che illustra alcuni dei metodi principali:</p><div class="code-block code-line-numbers" style="counter-reset:code-block 0"><div class="code-header language-python"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title="Copia negli appunti"><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>class</span> <span class=nc>A2AGroupChatAgent</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>openai_api_key</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>registry_url</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>model_name</span><span class=p>:</span> <span class=nb>str</span> <span class=o>=</span> <span class=s2>&#34;gpt-4o&#34;</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>llm</span> <span class=o>=</span> <span class=n>ChatOpenAI</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=n>model</span><span class=o>=</span><span class=n>model_name</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>openai_api_key</span><span class=o>=</span><span class=n>openai_api_key</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>temperature</span><span class=o>=</span><span class=mf>0.1</span>  <span class=c1># Bassa temperatura per analisi finanziarie</span>
</span></span><span class=line><span class=cl>        <span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>registry_service</span> <span class=o>=</span> <span class=n>AgentRegistryService</span><span class=p>(</span><span class=n>registry_url</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>_agent_urls</span> <span class=o>=</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>_requires_debate_analysis</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>user_message</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;Usa LLM per determinare intelligentemente se serve debate strutturato.&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>system_prompt</span> <span class=o>=</span> <span class=s2>&#34;&#34;&#34;You are a debate necessity classifier for a multi-agent financial analysis system.
</span></span></span><span class=line><span class=cl><span class=s2>        
</span></span></span><span class=line><span class=cl><span class=s2>        STRUCTURED DEBATE IS NEEDED when:
</span></span></span><span class=line><span class=cl><span class=s2>        1. The query asks for investment decisions or recommendations (buy/sell/hold advice)
</span></span></span><span class=line><span class=cl><span class=s2>        2. The query requires weighing conflicting factors or multiple perspectives
</span></span></span><span class=line><span class=cl><span class=s2>        3. The query asks for comprehensive analysis that would benefit from specialist disagreement/consensus
</span></span></span><span class=line><span class=cl><span class=s2>        4. The query involves risk assessment or strategic financial decisions
</span></span></span><span class=line><span class=cl><span class=s2>        5. The query asks for opinions, advice, or evaluations that could have multiple valid perspectives
</span></span></span><span class=line><span class=cl><span class=s2>        6. The query involves portfolio management decisions
</span></span></span><span class=line><span class=cl><span class=s2>        
</span></span></span><span class=line><span class=cl><span class=s2>        The query can be in ANY language. Focus on the intent and meaning, not specific keywords.
</span></span></span><span class=line><span class=cl><span class=s2>        Respond with ONLY &#34;YES&#34; if structured debate is needed, or &#34;NO&#34; if it&#39;s not needed.&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=n>response</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>llm</span><span class=o>.</span><span class=n>invoke</span><span class=p>([</span>
</span></span><span class=line><span class=cl>            <span class=n>SystemMessage</span><span class=p>(</span><span class=n>content</span><span class=o>=</span><span class=n>system_prompt</span><span class=p>),</span>
</span></span><span class=line><span class=cl>            <span class=n>HumanMessage</span><span class=p>(</span><span class=n>content</span><span class=o>=</span><span class=sa>f</span><span class=s2>&#34;User query: </span><span class=si>{</span><span class=n>user_message</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>])</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>response</span><span class=o>.</span><span class=n>content</span><span class=o>.</span><span class=n>strip</span><span class=p>()</span><span class=o>.</span><span class=n>upper</span><span class=p>()</span> <span class=o>==</span> <span class=s2>&#34;YES&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>_enhance_metadata_with_risk_tolerance</span><span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=p>,</span> <span class=n>user_message</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>metadata</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]]</span> <span class=o>=</span> <span class=kc>None</span>
</span></span><span class=line><span class=cl>    <span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;Extract or infer risk tolerance and add it to metadata.&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=n>enhanced_metadata</span> <span class=o>=</span> <span class=n>metadata</span><span class=o>.</span><span class=n>copy</span><span class=p>()</span> <span class=k>if</span> <span class=n>metadata</span> <span class=k>else</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># If risk_tolerance already provided in metadata, use it</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=s2>&#34;risk_tolerance&#34;</span> <span class=ow>in</span> <span class=n>enhanced_metadata</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Using provided risk_tolerance: </span><span class=si>{</span><span class=n>enhanced_metadata</span><span class=p>[</span><span class=s1>&#39;risk_tolerance&#39;</span><span class=p>]</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>enhanced_metadata</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># Otherwise, infer using LLM</span>
</span></span><span class=line><span class=cl>        <span class=n>risk_tolerance</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_infer_risk_tolerance_from_message</span><span class=p>(</span><span class=n>user_message</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>enhanced_metadata</span><span class=p>[</span><span class=s2>&#34;risk_tolerance&#34;</span><span class=p>]</span> <span class=o>=</span> <span class=n>risk_tolerance</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Inferred risk_tolerance: </span><span class=si>{</span><span class=n>risk_tolerance</span><span class=si>}</span><span class=s2> from user message&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>enhanced_metadata</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>_infer_risk_tolerance_from_message</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>user_message</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;Use LLM to infer risk tolerance from user message content.&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=n>system_prompt</span> <span class=o>=</span> <span class=s2>&#34;&#34;&#34;You are a financial risk tolerance classifier. 
</span></span></span><span class=line><span class=cl><span class=s2>        Analyze the user&#39;s message to determine their risk tolerance profile.
</span></span></span><span class=line><span class=cl><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2>        RISK TOLERANCE LEVELS:
</span></span></span><span class=line><span class=cl><span class=s2>        - &#34;averse&#34;: Conservative investors (capital preservation, stable returns, dividends)
</span></span></span><span class=line><span class=cl><span class=s2>        - &#34;neutral&#34;: Balanced investors (moderate growth with reasonable risk)  
</span></span></span><span class=line><span class=cl><span class=s2>        - &#34;seeking&#34;: Aggressive investors (high returns, accept high volatility)
</span></span></span><span class=line><span class=cl><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2>        CLASSIFICATION GUIDELINES:
</span></span></span><span class=line><span class=cl><span class=s2>        1. Look for explicit risk preferences (&#34;conservative&#34;, &#34;aggressive&#34;, &#34;safe&#34;)
</span></span></span><span class=line><span class=cl><span class=s2>        2. Consider investment timeframe (&#34;retirement&#34;, &#34;long-term&#34;, &#34;quick gains&#34;)
</span></span></span><span class=line><span class=cl><span class=s2>        3. Analyze vocabulary and tone (cautious vs confident vs speculative)
</span></span></span><span class=line><span class=cl><span class=s2>        4. Consider asset mentions (bonds/dividends = averse, growth stocks = seeking)
</span></span></span><span class=line><span class=cl><span class=s2>        
</span></span></span><span class=line><span class=cl><span class=s2>        The message can be in any language. Focus on intent and risk signals.
</span></span></span><span class=line><span class=cl><span class=s2>        Respond with ONLY one word: &#34;averse&#34;, &#34;neutral&#34;, or &#34;seeking&#34;.&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>response</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>llm</span><span class=o>.</span><span class=n>invoke</span><span class=p>([</span>
</span></span><span class=line><span class=cl>                <span class=n>SystemMessage</span><span class=p>(</span><span class=n>content</span><span class=o>=</span><span class=n>system_prompt</span><span class=p>),</span>
</span></span><span class=line><span class=cl>                <span class=n>HumanMessage</span><span class=p>(</span><span class=n>content</span><span class=o>=</span><span class=sa>f</span><span class=s2>&#34;User message: </span><span class=si>{</span><span class=n>user_message</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=p>])</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=n>risk_level</span> <span class=o>=</span> <span class=n>response</span><span class=o>.</span><span class=n>content</span><span class=o>.</span><span class=n>strip</span><span class=p>()</span><span class=o>.</span><span class=n>lower</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>risk_level</span> <span class=k>if</span> <span class=n>risk_level</span> <span class=ow>in</span> <span class=p>[</span><span class=s2>&#34;averse&#34;</span><span class=p>,</span> <span class=s2>&#34;neutral&#34;</span><span class=p>,</span> <span class=s2>&#34;seeking&#34;</span><span class=p>]</span> <span class=k>else</span> <span class=s2>&#34;neutral&#34;</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>        <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>logger</span><span class=o>.</span><span class=n>error</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Error inferring risk tolerance: </span><span class=si>{</span><span class=n>e</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=s2>&#34;neutral&#34;</span>  <span class=c1># Safe default</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>async</span> <span class=k>def</span> <span class=nf>_conduct_structured_debate</span><span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=p>,</span> <span class=n>user_message</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>context_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>task_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>        <span class=n>required_agents</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=nb>str</span><span class=p>],</span> <span class=n>metadata</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]]</span> <span class=o>=</span> <span class=kc>None</span>
</span></span><span class=line><span class=cl>    <span class=p>)</span> <span class=o>-&gt;</span> <span class=n>List</span><span class=p>[</span><span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]]:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;Conduce debate strutturato con risk tolerance personalizzato.&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=n>risk_tolerance</span> <span class=o>=</span> <span class=n>metadata</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&#34;risk_tolerance&#34;</span><span class=p>,</span> <span class=s2>&#34;neutral&#34;</span><span class=p>)</span> <span class=k>if</span> <span class=n>metadata</span> <span class=k>else</span> <span class=s2>&#34;neutral&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Starting structured debate with agents: </span><span class=si>{</span><span class=n>required_agents</span><span class=si>}</span><span class=s2> (risk_tolerance: </span><span class=si>{</span><span class=n>risk_tolerance</span><span class=si>}</span><span class=s2>)&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># Gli agenti riceveranno il risk_tolerance nei metadati per personalizzare le analisi</span>
</span></span><span class=line><span class=cl>        <span class=c1># ... resto dell&#39;implementazione debate ...</span></span></span></code></pre></div></div><h2 id=54-pattern-di-comunicazione-a2a>5.4 Pattern di Comunicazione A2A</h2><p>Ogni comunicazione tra agenti segue il protocollo A2A utilizzando JSON-RPC:</p><div class="code-block code-line-numbers" style="counter-reset:code-block 0"><div class="code-header language-python"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title="Copia negli appunti"><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>async</span> <span class=k>def</span> <span class=nf>_send_message_to_agent</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=bp>self</span><span class=p>,</span> <span class=n>agent_name</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>agent_url</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>    <span class=n>message</span><span class=p>:</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>],</span> <span class=n>metadata</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]]</span> <span class=o>=</span> <span class=kc>None</span>
</span></span><span class=line><span class=cl><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;Invia messaggio A2A-compliant agli agenti specializzati.&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=n>request_payload</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;jsonrpc&#34;</span><span class=p>:</span> <span class=s2>&#34;2.0&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;method&#34;</span><span class=p>:</span> <span class=s2>&#34;message/send&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;params&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;message&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;kind&#34;</span><span class=p>:</span> <span class=s2>&#34;message&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;messageId&#34;</span><span class=p>:</span> <span class=nb>str</span><span class=p>(</span><span class=n>uuid</span><span class=o>.</span><span class=n>uuid4</span><span class=p>()),</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;role&#34;</span><span class=p>:</span> <span class=s2>&#34;user&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                <span class=s2>&#34;parts&#34;</span><span class=p>:</span> <span class=p>[{</span><span class=s2>&#34;kind&#34;</span><span class=p>:</span> <span class=s2>&#34;text&#34;</span><span class=p>,</span> <span class=s2>&#34;text&#34;</span><span class=p>:</span> <span class=n>user_message</span><span class=p>}],</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;contextId&#34;</span><span class=p>:</span> <span class=n>context_id</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;taskId&#34;</span><span class=p>:</span> <span class=n>task_id</span>
</span></span><span class=line><span class=cl>            <span class=p>},</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;metadata&#34;</span><span class=p>:</span> <span class=n>metadata</span> <span class=ow>or</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>        <span class=p>},</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;id&#34;</span><span class=p>:</span> <span class=nb>str</span><span class=p>(</span><span class=n>uuid</span><span class=o>.</span><span class=n>uuid4</span><span class=p>())</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>async</span> <span class=k>with</span> <span class=n>aiohttp</span><span class=o>.</span><span class=n>ClientSession</span><span class=p>(</span><span class=n>timeout</span><span class=o>=</span><span class=n>aiohttp</span><span class=o>.</span><span class=n>ClientTimeout</span><span class=p>(</span><span class=n>total</span><span class=o>=</span><span class=mf>300.0</span><span class=p>))</span> <span class=k>as</span> <span class=n>session</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>async</span> <span class=k>with</span> <span class=n>session</span><span class=o>.</span><span class=n>post</span><span class=p>(</span><span class=n>agent_url</span><span class=p>,</span> <span class=n>json</span><span class=o>=</span><span class=n>request_payload</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                              <span class=n>headers</span><span class=o>=</span><span class=p>{</span><span class=s2>&#34;Content-Type&#34;</span><span class=p>:</span> <span class=s2>&#34;application/json&#34;</span><span class=p>})</span> <span class=k>as</span> <span class=n>response</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>result</span> <span class=o>=</span> <span class=k>await</span> <span class=n>response</span><span class=o>.</span><span class=n>json</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1># Estrai contenuto dalla risposta A2A</span>
</span></span><span class=line><span class=cl>            <span class=n>a2a_result</span> <span class=o>=</span> <span class=n>result</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&#34;result&#34;</span><span class=p>,</span> <span class=p>{})</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>a2a_result</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&#34;kind&#34;</span><span class=p>)</span> <span class=o>==</span> <span class=s2>&#34;message&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=n>parts</span> <span class=o>=</span> <span class=n>a2a_result</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&#34;parts&#34;</span><span class=p>,</span> <span class=p>[])</span>
</span></span><span class=line><span class=cl>                <span class=n>analysis</span> <span class=o>=</span> <span class=s2>&#34; &#34;</span><span class=o>.</span><span class=n>join</span><span class=p>([</span><span class=n>p</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&#34;text&#34;</span><span class=p>,</span> <span class=s2>&#34;&#34;</span><span class=p>)</span> <span class=k>for</span> <span class=n>p</span> <span class=ow>in</span> <span class=n>parts</span> 
</span></span><span class=line><span class=cl>                                   <span class=k>if</span> <span class=n>p</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&#34;kind&#34;</span><span class=p>)</span> <span class=o>==</span> <span class=s2>&#34;text&#34;</span><span class=p>])</span></span></span></code></pre></div></div><h2 id=55-implementazione-degli-agenti-specializzati>5.5 Implementazione degli Agenti Specializzati</h2><h3 id=551-fundamental-agent>5.5.1 Fundamental Agent</h3><p>Il Fundamental Agent utilizza <strong>Langchain</strong> con pattern di <strong>tool calling</strong> per accedere a dati finanziari:</p><div class="code-block code-line-numbers" style="counter-reset:code-block 0"><div class="code-header language-python"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title="Copia negli appunti"><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>class</span> <span class=nc>FundamentalAgent</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>openai_api_key</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>model_name</span><span class=p>:</span> <span class=nb>str</span> <span class=o>=</span> <span class=s2>&#34;gpt-4o&#34;</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>llm</span> <span class=o>=</span> <span class=n>ChatOpenAI</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=n>api_key</span><span class=o>=</span><span class=n>openai_api_key</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>model</span><span class=o>=</span><span class=n>model_name</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>temperature</span><span class=o>=</span><span class=mf>0.1</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>max_tokens</span><span class=o>=</span><span class=mi>4000</span>
</span></span><span class=line><span class=cl>        <span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># Tools specializzati per analisi fondamentale</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>tools</span> <span class=o>=</span> <span class=n>get_fundamental_tools</span><span class=p>()</span>  <span class=c1># Yahoo Finance API, keyword-based analysis</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># Prompt specializzato per analisi fondamentale</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>system_prompt</span> <span class=o>=</span> <span class=s2>&#34;&#34;&#34;You are a specialized Fundamental Analysis Agent.
</span></span></span><span class=line><span class=cl><span class=s2>        Your core expertise includes:
</span></span></span><span class=line><span class=cl><span class=s2>        
</span></span></span><span class=line><span class=cl><span class=s2>        **Financial Statement Analysis:**
</span></span></span><span class=line><span class=cl><span class=s2>        - Deep analysis of income statements, balance sheets, and cash flow statements
</span></span></span><span class=line><span class=cl><span class=s2>        - Assessment of financial health, profitability, and operational efficiency
</span></span></span><span class=line><span class=cl><span class=s2>        
</span></span></span><span class=line><span class=cl><span class=s2>        **SEC Filing Analysis:**  
</span></span></span><span class=line><span class=cl><span class=s2>        - Comprehensive review of 10-K and 10-Q reports
</span></span></span><span class=line><span class=cl><span class=s2>        - Management Discussion &amp; Analysis (MD&amp;A) insights
</span></span></span><span class=line><span class=cl><span class=s2>        
</span></span></span><span class=line><span class=cl><span class=s2>        **Investment Decision Framework:**
</span></span></span><span class=line><span class=cl><span class=s2>        Your analysis should result in clear BUY/SELL/HOLD recommendations with:
</span></span></span><span class=line><span class=cl><span class=s2>        - Target price estimates with supporting rationale
</span></span></span><span class=line><span class=cl><span class=s2>        - Risk assessment (financial, operational, market risks)&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># Langchain Agent Executor</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>agent_executor</span> <span class=o>=</span> <span class=n>AgentExecutor</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=n>agent</span><span class=o>=</span><span class=n>create_openai_tools_agent</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>llm</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>tools</span><span class=p>,</span> <span class=n>prompt</span><span class=p>),</span>
</span></span><span class=line><span class=cl>            <span class=n>tools</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>tools</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>verbose</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>handle_parsing_errors</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=n>max_iterations</span><span class=o>=</span><span class=mi>10</span>
</span></span><span class=line><span class=cl>        <span class=p>)</span></span></span></code></pre></div></div><h3 id=552-sentiment-agent---implementazione-vader>5.5.2 Sentiment Agent - Implementazione VADER</h3><p>Il Sentiment Agent utilizza una combinazione di <strong>VADER</strong> (Valence Aware Dictionary and sEntiment Reasoner) e <strong>TextBlob</strong> per analizzare il sentiment delle news finanziarie:</p><div class="code-block code-line-numbers" style="counter-reset:code-block 0"><div class="code-header language-python"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title="Copia negli appunti"><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>class</span> <span class=nc>NewsSummarizationTool</span><span class=p>(</span><span class=n>BaseTool</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>name</span><span class=p>:</span> <span class=nb>str</span> <span class=o>=</span> <span class=s2>&#34;analyze_news_sentiment&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>description</span><span class=p>:</span> <span class=nb>str</span> <span class=o>=</span> <span class=s2>&#34;Analyzes financial news sentiment using VADER and TextBlob&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>_analyze_vader_sentiment</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>text</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;Analizza sentiment usando VADER - ottimizzato per social media e news.&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>vader_analyzer</span> <span class=o>=</span> <span class=n>SentimentIntensityAnalyzer</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=n>scores</span> <span class=o>=</span> <span class=n>vader_analyzer</span><span class=o>.</span><span class=n>polarity_scores</span><span class=p>(</span><span class=n>text</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=c1># Compound score da -1 a +1</span>
</span></span><span class=line><span class=cl>        <span class=n>compound</span> <span class=o>=</span> <span class=n>scores</span><span class=p>[</span><span class=s1>&#39;compound&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>compound</span> <span class=o>&gt;=</span> <span class=mf>0.05</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>label</span> <span class=o>=</span> <span class=s2>&#34;positive&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>elif</span> <span class=n>compound</span> <span class=o>&lt;=</span> <span class=o>-</span><span class=mf>0.05</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>label</span> <span class=o>=</span> <span class=s2>&#34;negative&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>label</span> <span class=o>=</span> <span class=s2>&#34;neutral&#34;</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;compound&#34;</span><span class=p>:</span> <span class=nb>float</span><span class=p>(</span><span class=n>compound</span><span class=p>),</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;pos&#34;</span><span class=p>:</span> <span class=nb>float</span><span class=p>(</span><span class=n>scores</span><span class=p>[</span><span class=s1>&#39;pos&#39;</span><span class=p>]),</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;neg&#34;</span><span class=p>:</span> <span class=nb>float</span><span class=p>(</span><span class=n>scores</span><span class=p>[</span><span class=s1>&#39;neg&#39;</span><span class=p>]),</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;neu&#34;</span><span class=p>:</span> <span class=nb>float</span><span class=p>(</span><span class=n>scores</span><span class=p>[</span><span class=s1>&#39;neu&#39;</span><span class=p>]),</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;label&#34;</span><span class=p>:</span> <span class=n>label</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>_analyze_textblob_sentiment</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>text</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;Analizza sentiment usando TextBlob.&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>blob</span> <span class=o>=</span> <span class=n>TextBlob</span><span class=p>(</span><span class=n>text</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>polarity</span> <span class=o>=</span> <span class=n>blob</span><span class=o>.</span><span class=n>sentiment</span><span class=o>.</span><span class=n>polarity</span>  <span class=c1># -1 to 1</span>
</span></span><span class=line><span class=cl>        <span class=n>subjectivity</span> <span class=o>=</span> <span class=n>blob</span><span class=o>.</span><span class=n>sentiment</span><span class=o>.</span><span class=n>subjectivity</span>  <span class=c1># 0 to 1</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>polarity</span> <span class=o>&gt;</span> <span class=mf>0.1</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>label</span> <span class=o>=</span> <span class=s2>&#34;positive&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>elif</span> <span class=n>polarity</span> <span class=o>&lt;</span> <span class=o>-</span><span class=mf>0.1</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>label</span> <span class=o>=</span> <span class=s2>&#34;negative&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>label</span> <span class=o>=</span> <span class=s2>&#34;neutral&#34;</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=p>{</span><span class=s2>&#34;polarity&#34;</span><span class=p>:</span> <span class=nb>float</span><span class=p>(</span><span class=n>polarity</span><span class=p>),</span> <span class=s2>&#34;subjectivity&#34;</span><span class=p>:</span> <span class=nb>float</span><span class=p>(</span><span class=n>subjectivity</span><span class=p>),</span> <span class=s2>&#34;label&#34;</span><span class=p>:</span> <span class=n>label</span><span class=p>}</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>_combine_sentiments</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>textblob</span><span class=p>:</span> <span class=n>Dict</span><span class=p>,</span> <span class=n>vader</span><span class=p>:</span> <span class=n>Dict</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;Combina i risultati con peso maggiore per VADER (migliore per news).&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>combined_score</span> <span class=o>=</span> <span class=p>(</span><span class=n>textblob</span><span class=p>[</span><span class=s2>&#34;polarity&#34;</span><span class=p>]</span> <span class=o>*</span> <span class=mf>0.4</span><span class=p>)</span> <span class=o>+</span> <span class=p>(</span><span class=n>vader</span><span class=p>[</span><span class=s2>&#34;compound&#34;</span><span class=p>]</span> <span class=o>*</span> <span class=mf>0.6</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>combined_score</span> <span class=o>&gt;</span> <span class=mf>0.1</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>label</span> <span class=o>=</span> <span class=s2>&#34;positive&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>elif</span> <span class=n>combined_score</span> <span class=o>&lt;</span> <span class=o>-</span><span class=mf>0.1</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>label</span> <span class=o>=</span> <span class=s2>&#34;negative&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>label</span> <span class=o>=</span> <span class=s2>&#34;neutral&#34;</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=p>{</span><span class=s2>&#34;score&#34;</span><span class=p>:</span> <span class=nb>float</span><span class=p>(</span><span class=n>combined_score</span><span class=p>),</span> <span class=s2>&#34;label&#34;</span><span class=p>:</span> <span class=n>label</span><span class=p>,</span> <span class=s2>&#34;confidence&#34;</span><span class=p>:</span> <span class=nb>abs</span><span class=p>(</span><span class=n>combined_score</span><span class=p>)}</span></span></span></code></pre></div></div><h3 id=553-fundamental-agent---implementazione-keyword-based>5.5.3 Fundamental Agent - Implementazione Keyword-Based</h3><p>L&rsquo;analisi fondamentale <strong>non utilizza tecniche RAG</strong>, ma impiega un approccio molto elementare basato su <strong>keyword matching</strong> partendo dai metadati restituiti da Yahoo Finance:</p><div class="code-block code-line-numbers" style="counter-reset:code-block 0"><div class="code-header language-python"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title="Copia negli appunti"><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>class</span> <span class=nc>RAGAnalysisTool</span><span class=p>(</span><span class=n>BaseTool</span><span class=p>):</span>  <span class=c1># Nome mantenuto per compatibilit√† e futura evoluzione, ma NON √® vero RAG</span>
</span></span><span class=line><span class=cl>    <span class=n>name</span><span class=p>:</span> <span class=nb>str</span> <span class=o>=</span> <span class=s2>&#34;rag_fundamental_analysis&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>description</span><span class=p>:</span> <span class=nb>str</span> <span class=o>=</span> <span class=s2>&#34;Performs fundamental analysis using keyword-based data extraction&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>_find_cash_flow_key</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>data</span><span class=p>:</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>],</span> <span class=n>possible_keys</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=nb>str</span><span class=p>])</span> <span class=o>-&gt;</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>str</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;Trova la chiave corretta per i dati cash flow usando pattern matching.&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>item_name</span><span class=p>,</span> <span class=n>_</span> <span class=ow>in</span> <span class=n>data</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
</span></span><span class=line><span class=cl>            <span class=k>for</span> <span class=n>key</span> <span class=ow>in</span> <span class=n>possible_keys</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=n>key</span><span class=o>.</span><span class=n>lower</span><span class=p>()</span> <span class=ow>in</span> <span class=n>item_name</span><span class=o>.</span><span class=n>lower</span><span class=p>():</span>
</span></span><span class=line><span class=cl>                    <span class=k>return</span> <span class=n>item_name</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=kc>None</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>_analyze_cash_flow</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>financial_context</span><span class=p>:</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>],</span> <span class=n>guidance</span><span class=p>:</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;Analizza cash flow con ricerca per keyword, non RAG.&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>quarterly_data</span> <span class=o>=</span> <span class=n>financial_context</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&#34;cash_flow&#34;</span><span class=p>,</span> <span class=p>{})</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&#34;quarterly&#34;</span><span class=p>,</span> <span class=p>{})</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&#34;data&#34;</span><span class=p>,</span> <span class=p>{})</span>
</span></span><span class=line><span class=cl>        
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>quarterly_data</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=c1># Cerca &#34;Operating Cash Flow&#34; usando keyword matching</span>
</span></span><span class=line><span class=cl>            <span class=n>operating_cf_key</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_find_cash_flow_key</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                <span class=n>quarterly_data</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>                <span class=p>[</span><span class=s2>&#34;Operating Cash Flow&#34;</span><span class=p>,</span> <span class=s2>&#34;Total Cash From Operating Activities&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>            <span class=p>)</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>operating_cf_key</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=c1># Estrai valori usando il pattern trovato</span>
</span></span><span class=line><span class=cl>                <span class=n>cf_values</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>                <span class=k>for</span> <span class=n>period</span><span class=p>,</span> <span class=n>values</span> <span class=ow>in</span> <span class=n>quarterly_data</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
</span></span><span class=line><span class=cl>                    <span class=k>if</span> <span class=n>operating_cf_key</span> <span class=ow>in</span> <span class=n>values</span> <span class=ow>and</span> <span class=n>values</span><span class=p>[</span><span class=n>operating_cf_key</span><span class=p>]</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                        <span class=n>cf_values</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>values</span><span class=p>[</span><span class=n>operating_cf_key</span><span class=p>])</span></span></span></code></pre></div></div><h3 id=554-valuation-agent-tools>5.5.4 Valuation Agent Tools</h3><p>Il Valuation Agent implementa calcoli finanziari specializzati utilizzando <strong>pandas</strong> e <strong>numpy</strong>:</p><div class="code-block code-line-numbers" style="counter-reset:code-block 0"><div class="code-header language-python"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title="Copia negli appunti"><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>class</span> <span class=nc>VolatilityCalculationTool</span><span class=p>(</span><span class=n>BaseTool</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>name</span><span class=p>:</span> <span class=nb>str</span> <span class=o>=</span> <span class=s2>&#34;calculate_volatility_metrics&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>description</span><span class=p>:</span> <span class=nb>str</span> <span class=o>=</span> <span class=s2>&#34;Calculates comprehensive volatility and risk metrics&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>_run</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>symbol</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>risk_free_rate</span><span class=p>:</span> <span class=nb>float</span> <span class=o>=</span> <span class=mf>0.05</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34;Calculate volatility and risk metrics synchronously.&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>try</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=c1># First fetch the data</span>
</span></span><span class=line><span class=cl>            <span class=n>stock_tool</span> <span class=o>=</span> <span class=n>StockDataTool</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=n>stock_data</span> <span class=o>=</span> <span class=n>stock_tool</span><span class=o>.</span><span class=n>_run</span><span class=p>(</span><span class=n>symbol</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=ow>not</span> <span class=n>stock_data</span><span class=p>[</span><span class=s2>&#34;success&#34;</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=n>stock_data</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1># Convert to pandas DataFrame for calculations</span>
</span></span><span class=line><span class=cl>            <span class=n>price_data</span> <span class=o>=</span> <span class=n>stock_data</span><span class=p>[</span><span class=s2>&#34;price_data&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>            <span class=n>df</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>DataFrame</span><span class=p>({</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;Date&#39;</span><span class=p>:</span> <span class=n>pd</span><span class=o>.</span><span class=n>to_datetime</span><span class=p>(</span><span class=n>price_data</span><span class=p>[</span><span class=s2>&#34;dates&#34;</span><span class=p>]),</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;Close&#39;</span><span class=p>:</span> <span class=n>price_data</span><span class=p>[</span><span class=s2>&#34;close&#34;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>                <span class=s1>&#39;Volume&#39;</span><span class=p>:</span> <span class=n>price_data</span><span class=p>[</span><span class=s2>&#34;volume&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>            <span class=p>})</span>
</span></span><span class=line><span class=cl>            <span class=n>df</span><span class=o>.</span><span class=n>set_index</span><span class=p>(</span><span class=s1>&#39;Date&#39;</span><span class=p>,</span> <span class=n>inplace</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1># Calculate daily returns</span>
</span></span><span class=line><span class=cl>            <span class=n>df</span><span class=p>[</span><span class=s1>&#39;Daily_Return&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=n>df</span><span class=p>[</span><span class=s1>&#39;Close&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>pct_change</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=n>df</span> <span class=o>=</span> <span class=n>df</span><span class=o>.</span><span class=n>dropna</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=n>df</span><span class=p>)</span> <span class=o>&lt;</span> <span class=mi>2</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=s2>&#34;success&#34;</span><span class=p>:</span> <span class=kc>False</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=s2>&#34;error&#34;</span><span class=p>:</span> <span class=s2>&#34;Insufficient data for calculations&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                    <span class=s2>&#34;symbol&#34;</span><span class=p>:</span> <span class=n>symbol</span>
</span></span><span class=line><span class=cl>                <span class=p>}</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1># Basic metrics</span>
</span></span><span class=line><span class=cl>            <span class=n>daily_returns</span> <span class=o>=</span> <span class=n>df</span><span class=p>[</span><span class=s1>&#39;Daily_Return&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1># Daily metrics</span>
</span></span><span class=line><span class=cl>            <span class=n>mean_daily_return</span> <span class=o>=</span> <span class=n>daily_returns</span><span class=o>.</span><span class=n>mean</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=n>daily_volatility</span> <span class=o>=</span> <span class=n>daily_returns</span><span class=o>.</span><span class=n>std</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1># Calculate cumulative return for proper annualized return</span>
</span></span><span class=line><span class=cl>            <span class=n>start_price</span> <span class=o>=</span> <span class=n>df</span><span class=p>[</span><span class=s1>&#39;Close&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>iloc</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span>
</span></span><span class=line><span class=cl>            <span class=n>end_price</span> <span class=o>=</span> <span class=n>df</span><span class=p>[</span><span class=s1>&#39;Close&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>iloc</span><span class=p>[</span><span class=o>-</span><span class=mi>1</span><span class=p>]</span>
</span></span><span class=line><span class=cl>            <span class=n>cumulative_return</span> <span class=o>=</span> <span class=p>(</span><span class=n>end_price</span> <span class=o>/</span> <span class=n>start_price</span><span class=p>)</span> <span class=o>-</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>            <span class=n>trading_days</span> <span class=o>=</span> <span class=nb>len</span><span class=p>(</span><span class=n>df</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1># Annualized metrics</span>
</span></span><span class=line><span class=cl>            <span class=n>annualized_return</span> <span class=o>=</span> <span class=p>((</span><span class=mi>1</span> <span class=o>+</span> <span class=n>cumulative_return</span><span class=p>)</span> <span class=o>**</span> <span class=p>(</span><span class=n>TRADING_DAYS_PER_YEAR</span> <span class=o>/</span> <span class=n>trading_days</span><span class=p>))</span> <span class=o>-</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>            <span class=n>annualized_volatility</span> <span class=o>=</span> <span class=n>daily_volatility</span> <span class=o>*</span> <span class=n>np</span><span class=o>.</span><span class=n>sqrt</span><span class=p>(</span><span class=n>TRADING_DAYS_PER_YEAR</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1># Sharpe ratio</span>
</span></span><span class=line><span class=cl>            <span class=n>sharpe_ratio</span> <span class=o>=</span> <span class=p>(</span><span class=n>annualized_return</span> <span class=o>-</span> <span class=n>risk_free_rate</span><span class=p>)</span> <span class=o>/</span> <span class=n>annualized_volatility</span> <span class=k>if</span> <span class=n>annualized_volatility</span> <span class=o>&gt;</span> <span class=mi>0</span> <span class=k>else</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1># Maximum drawdown calculation</span>
</span></span><span class=line><span class=cl>            <span class=n>cumulative_returns</span> <span class=o>=</span> <span class=p>(</span><span class=mi>1</span> <span class=o>+</span> <span class=n>daily_returns</span><span class=p>)</span><span class=o>.</span><span class=n>cumprod</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=n>rolling_max</span> <span class=o>=</span> <span class=n>cumulative_returns</span><span class=o>.</span><span class=n>expanding</span><span class=p>()</span><span class=o>.</span><span class=n>max</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=n>drawdowns</span> <span class=o>=</span> <span class=p>(</span><span class=n>cumulative_returns</span> <span class=o>-</span> <span class=n>rolling_max</span><span class=p>)</span> <span class=o>/</span> <span class=n>rolling_max</span>
</span></span><span class=line><span class=cl>            <span class=n>max_drawdown</span> <span class=o>=</span> <span class=n>drawdowns</span><span class=o>.</span><span class=n>min</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1># Value at Risk (VaR) - 5% and 1%</span>
</span></span><span class=line><span class=cl>            <span class=n>var_5</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>percentile</span><span class=p>(</span><span class=n>daily_returns</span><span class=p>,</span> <span class=mi>5</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>var_1</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>percentile</span><span class=p>(</span><span class=n>daily_returns</span><span class=p>,</span> <span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1># Additional statistics</span>
</span></span><span class=line><span class=cl>            <span class=n>skewness</span> <span class=o>=</span> <span class=n>daily_returns</span><span class=o>.</span><span class=n>skew</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=n>kurtosis</span> <span class=o>=</span> <span class=n>daily_returns</span><span class=o>.</span><span class=n>kurtosis</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=c1># Price performance metrics</span>
</span></span><span class=line><span class=cl>            <span class=n>total_return</span> <span class=o>=</span> <span class=p>(</span><span class=n>df</span><span class=p>[</span><span class=s1>&#39;Close&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>iloc</span><span class=p>[</span><span class=o>-</span><span class=mi>1</span><span class=p>]</span> <span class=o>-</span> <span class=n>df</span><span class=p>[</span><span class=s1>&#39;Close&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>iloc</span><span class=p>[</span><span class=mi>0</span><span class=p>])</span> <span class=o>/</span> <span class=n>df</span><span class=p>[</span><span class=s1>&#39;Close&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>iloc</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=n>result</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;success&#34;</span><span class=p>:</span> <span class=kc>True</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;symbol&#34;</span><span class=p>:</span> <span class=n>symbol</span><span class=o>.</span><span class=n>upper</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;analysis_period&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=s2>&#34;start_date&#34;</span><span class=p>:</span> <span class=n>df</span><span class=o>.</span><span class=n>index</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span><span class=o>.</span><span class=n>strftime</span><span class=p>(</span><span class=s2>&#34;%Y-%m-</span><span class=si>%d</span><span class=s2>&#34;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>                    <span class=s2>&#34;end_date&#34;</span><span class=p>:</span> <span class=n>df</span><span class=o>.</span><span class=n>index</span><span class=p>[</span><span class=o>-</span><span class=mi>1</span><span class=p>]</span><span class=o>.</span><span class=n>strftime</span><span class=p>(</span><span class=s2>&#34;%Y-%m-</span><span class=si>%d</span><span class=s2>&#34;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>                    <span class=s2>&#34;trading_days&#34;</span><span class=p>:</span> <span class=nb>len</span><span class=p>(</span><span class=n>df</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=p>},</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;price_metrics&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=s2>&#34;start_price&#34;</span><span class=p>:</span> <span class=nb>float</span><span class=p>(</span><span class=n>df</span><span class=p>[</span><span class=s1>&#39;Close&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>iloc</span><span class=p>[</span><span class=mi>0</span><span class=p>]),</span>
</span></span><span class=line><span class=cl>                    <span class=s2>&#34;end_price&#34;</span><span class=p>:</span> <span class=nb>float</span><span class=p>(</span><span class=n>df</span><span class=p>[</span><span class=s1>&#39;Close&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>iloc</span><span class=p>[</span><span class=o>-</span><span class=mi>1</span><span class=p>]),</span>
</span></span><span class=line><span class=cl>                    <span class=s2>&#34;total_return&#34;</span><span class=p>:</span> <span class=nb>float</span><span class=p>(</span><span class=n>total_return</span><span class=p>),</span>
</span></span><span class=line><span class=cl>                    <span class=s2>&#34;annualized_return&#34;</span><span class=p>:</span> <span class=nb>float</span><span class=p>(</span><span class=n>annualized_return</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=p>},</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;volatility_metrics&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=s2>&#34;daily_volatility&#34;</span><span class=p>:</span> <span class=nb>float</span><span class=p>(</span><span class=n>daily_volatility</span><span class=p>),</span>
</span></span><span class=line><span class=cl>                    <span class=s2>&#34;annualized_volatility&#34;</span><span class=p>:</span> <span class=nb>float</span><span class=p>(</span><span class=n>annualized_volatility</span><span class=p>),</span>
</span></span><span class=line><span class=cl>                    <span class=s2>&#34;volatility_percentage&#34;</span><span class=p>:</span> <span class=nb>float</span><span class=p>(</span><span class=n>annualized_volatility</span> <span class=o>*</span> <span class=mi>100</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=p>},</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;risk_metrics&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=s2>&#34;sharpe_ratio&#34;</span><span class=p>:</span> <span class=nb>float</span><span class=p>(</span><span class=n>sharpe_ratio</span><span class=p>),</span>
</span></span><span class=line><span class=cl>                    <span class=s2>&#34;max_drawdown&#34;</span><span class=p>:</span> <span class=nb>float</span><span class=p>(</span><span class=n>max_drawdown</span><span class=p>),</span>
</span></span><span class=line><span class=cl>                    <span class=s2>&#34;max_drawdown_percentage&#34;</span><span class=p>:</span> <span class=nb>float</span><span class=p>(</span><span class=n>max_drawdown</span> <span class=o>*</span> <span class=mi>100</span><span class=p>),</span>
</span></span><span class=line><span class=cl>                    <span class=s2>&#34;var_5_percent&#34;</span><span class=p>:</span> <span class=nb>float</span><span class=p>(</span><span class=n>var_5</span><span class=p>),</span>
</span></span><span class=line><span class=cl>                    <span class=s2>&#34;var_1_percent&#34;</span><span class=p>:</span> <span class=nb>float</span><span class=p>(</span><span class=n>var_1</span><span class=p>),</span>
</span></span><span class=line><span class=cl>                    <span class=s2>&#34;risk_free_rate&#34;</span><span class=p>:</span> <span class=nb>float</span><span class=p>(</span><span class=n>risk_free_rate</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=p>},</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;distribution_metrics&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=s2>&#34;mean_daily_return&#34;</span><span class=p>:</span> <span class=nb>float</span><span class=p>(</span><span class=n>mean_daily_return</span><span class=p>),</span>
</span></span><span class=line><span class=cl>                    <span class=s2>&#34;skewness&#34;</span><span class=p>:</span> <span class=nb>float</span><span class=p>(</span><span class=n>skewness</span><span class=p>),</span>
</span></span><span class=line><span class=cl>                    <span class=s2>&#34;kurtosis&#34;</span><span class=p>:</span> <span class=nb>float</span><span class=p>(</span><span class=n>kurtosis</span><span class=p>),</span>
</span></span><span class=line><span class=cl>                    <span class=s2>&#34;positive_days&#34;</span><span class=p>:</span> <span class=nb>int</span><span class=p>((</span><span class=n>daily_returns</span> <span class=o>&gt;</span> <span class=mi>0</span><span class=p>)</span><span class=o>.</span><span class=n>sum</span><span class=p>()),</span>
</span></span><span class=line><span class=cl>                    <span class=s2>&#34;negative_days&#34;</span><span class=p>:</span> <span class=nb>int</span><span class=p>((</span><span class=n>daily_returns</span> <span class=o>&lt;</span> <span class=mi>0</span><span class=p>)</span><span class=o>.</span><span class=n>sum</span><span class=p>())</span>
</span></span><span class=line><span class=cl>                <span class=p>},</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;volume_metrics&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=s2>&#34;average_volume&#34;</span><span class=p>:</span> <span class=nb>float</span><span class=p>(</span><span class=n>df</span><span class=p>[</span><span class=s1>&#39;Volume&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>mean</span><span class=p>()),</span>
</span></span><span class=line><span class=cl>                    <span class=s2>&#34;volume_volatility&#34;</span><span class=p>:</span> <span class=nb>float</span><span class=p>(</span><span class=n>df</span><span class=p>[</span><span class=s1>&#39;Volume&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>std</span><span class=p>()),</span>
</span></span><span class=line><span class=cl>                    <span class=s2>&#34;latest_volume&#34;</span><span class=p>:</span> <span class=nb>float</span><span class=p>(</span><span class=n>df</span><span class=p>[</span><span class=s1>&#39;Volume&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>iloc</span><span class=p>[</span><span class=o>-</span><span class=mi>1</span><span class=p>])</span>
</span></span><span class=line><span class=cl>                <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>            <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Successfully calculated metrics for </span><span class=si>{</span><span class=n>symbol</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>result</span>
</span></span><span class=line><span class=cl>            
</span></span><span class=line><span class=cl>        <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>logger</span><span class=o>.</span><span class=n>error</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;Error calculating metrics for </span><span class=si>{</span><span class=n>symbol</span><span class=si>}</span><span class=s2>: </span><span class=si>{</span><span class=nb>str</span><span class=p>(</span><span class=n>e</span><span class=p>)</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;success&#34;</span><span class=p>:</span> <span class=kc>False</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;error&#34;</span><span class=p>:</span> <span class=sa>f</span><span class=s2>&#34;Failed to calculate metrics for </span><span class=si>{</span><span class=n>symbol</span><span class=si>}</span><span class=s2>: </span><span class=si>{</span><span class=nb>str</span><span class=p>(</span><span class=n>e</span><span class=p>)</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;symbol&#34;</span><span class=p>:</span> <span class=n>symbol</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span></span></span></code></pre></div></div><h2 id=56-agent-registration-e-discovery>5.6 Agent Registration e Discovery</h2><p>Ogni agente espone un endpoint <code>/.well-known/agent-card</code> per la discovery automatica. Prima di avviare tutto lo stack, ho utilizzato questi endpoint per la registrazione all&rsquo;interno dell&rsquo;Agent Registry:</p><div class="code-block code-line-numbers" style="counter-reset:code-block 0"><div class="code-header language-python"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title="Copia negli appunti"><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=nd>@app.get</span><span class=p>(</span><span class=s2>&#34;/.well-known/agent-card&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=k>async</span> <span class=k>def</span> <span class=nf>get_agent_card</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;Valuation Analysis Agent&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;description&#34;</span><span class=p>:</span> <span class=s2>&#34;Specialized agent for stock valuation and technical analysis&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;version&#34;</span><span class=p>:</span> <span class=s2>&#34;1.0.0&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;protocolVersion&#34;</span><span class=p>:</span> <span class=s2>&#34;0.3.0&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;url&#34;</span><span class=p>:</span> <span class=s2>&#34;http://0.0.0.0:3001/&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;preferredTransport&#34;</span><span class=p>:</span> <span class=s2>&#34;JSONRPC&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;skills&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>            <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;id&#34;</span><span class=p>:</span> <span class=s2>&#34;technical_valuation_analysis&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;Technical Valuation Analysis&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;description&#34;</span><span class=p>:</span> <span class=s2>&#34;Comprehensive technical analysis using historical data&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;tags&#34;</span><span class=p>:</span> <span class=p>[</span><span class=s2>&#34;technical-analysis&#34;</span><span class=p>,</span> <span class=s2>&#34;volatility-analysis&#34;</span><span class=p>,</span> <span class=s2>&#34;valuation-metrics&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span></span></span></code></pre></div></div><h2 id=57-consolidation-pattern-con-llm>5.7 Consolidation Pattern con LLM</h2><p>Il consolidamento delle analisi specialistiche utilizza un pattern di <strong>meta-prompt</strong> per sintetizzare le diverse prospettive.</p><div class="code-block code-line-numbers" style="counter-reset:code-block 0"><div class="code-header language-python"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title="Copia negli appunti"><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>_consolidate_analyses</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>agent_responses</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=n>Dict</span><span class=p>],</span> <span class=n>user_message</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>system_prompt</span> <span class=o>=</span> <span class=s2>&#34;&#34;&#34;You are a financial analysis consolidator. Your role is to 
</span></span></span><span class=line><span class=cl><span class=s2>    synthesize insights from multiple specialist agents into a coherent response.
</span></span></span><span class=line><span class=cl><span class=s2>    
</span></span></span><span class=line><span class=cl><span class=s2>    CONSOLIDATION GUIDELINES:
</span></span></span><span class=line><span class=cl><span class=s2>    1. Integrate insights from all successful agent responses
</span></span></span><span class=line><span class=cl><span class=s2>    2. Identify agreements and disagreements between agents
</span></span></span><span class=line><span class=cl><span class=s2>    3. Provide clear, actionable recommendations when possible
</span></span></span><span class=line><span class=cl><span class=s2>    4. If agents disagree, explain the different perspectives&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=n>analyses_text</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>response</span> <span class=ow>in</span> <span class=n>successful_responses</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>agent_name</span> <span class=o>=</span> <span class=n>response</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&#34;agent&#34;</span><span class=p>,</span> <span class=s2>&#34;unknown&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>analysis</span> <span class=o>=</span> <span class=n>response</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&#34;analysis&#34;</span><span class=p>,</span> <span class=s2>&#34;No analysis provided&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>analyses_text</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;**</span><span class=si>{</span><span class=n>agent_name</span><span class=o>.</span><span class=n>upper</span><span class=p>()</span><span class=si>}</span><span class=s2> AGENT:**</span><span class=se>\n</span><span class=si>{</span><span class=n>analysis</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=n>consolidation_prompt</span> <span class=o>=</span> <span class=sa>f</span><span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>    USER REQUEST: </span><span class=si>{</span><span class=n>user_message</span><span class=si>}</span><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2>    
</span></span></span><span class=line><span class=cl><span class=s2>    AGENT ANALYSES:
</span></span></span><span class=line><span class=cl><span class=s2>    </span><span class=si>{</span><span class=nb>chr</span><span class=p>(</span><span class=mi>10</span><span class=p>)</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>analyses_text</span><span class=p>)</span><span class=si>}</span><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2>    
</span></span></span><span class=line><span class=cl><span class=s2>    Please provide a consolidated analysis that synthesizes these perspectives.&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=n>response</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>llm</span><span class=o>.</span><span class=n>invoke</span><span class=p>([</span>
</span></span><span class=line><span class=cl>        <span class=n>SystemMessage</span><span class=p>(</span><span class=n>content</span><span class=o>=</span><span class=n>system_prompt</span><span class=p>),</span>
</span></span><span class=line><span class=cl>        <span class=n>HumanMessage</span><span class=p>(</span><span class=n>content</span><span class=o>=</span><span class=n>consolidation_prompt</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>])</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>response</span><span class=o>.</span><span class=n>content</span></span></span></code></pre></div></div><p>Questa soluzione di consolidamento √® complementare al <strong>sistema di debate strutturato</strong> implementato: quando il debate viene attivato, il consolidamento finale evidenzia il processo collaborativo seguito e i metadati del debate (rounds, turni, partecipazione), mentre per query informative usa il consolidamento standard per massimizzare velocit√† ed efficienza.</p><h2 id=58-semplificazioni-dellimplementazione-attuale>5.8 Semplificazioni dell&rsquo;implementazione attuale</h2><p>√à importante evidenziare alcune semplificazioni che ho adottato rispetto alle specifiche del paper originale, per scendere a compromessi pratici:</p><p><strong>Sentiment Analysis</strong>: L&rsquo;uso di VADER e TextBlob √® efficace per un prototipo, ma in un&rsquo;implementazione produttiva sarebbe opportuno valutare:</p><ul><li>Modelli transformer specializzati per testo finanziario (FinBERT)</li><li>Analisi multi-source pi√π sofisticata</li><li>Gestione del contesto finanziario specifico</li></ul><p><strong>Fundamental Analysis</strong>: L&rsquo;approccio keyword-based funziona sui dati strutturati di Yahoo Finance, ma un&rsquo;implementazione produttiva richiederebbe:</p><ul><li>Vero sistema RAG con vector embeddings per documenti SEC</li><li>Integrazione con database finanziari professionali (Bloomberg, Refinitiv)</li><li>Parsing semantico avanzato dei documenti 10-K/10-Q</li></ul><p><strong>Validazione</strong>: Il sistema manca di:</p><ul><li>Backtesting rigoroso delle raccomandazioni</li><li>Metriche di performance validate su dataset storici</li><li>Confronto con benchmark di mercato</li></ul><p>In ottica di un&rsquo;evoluzione futura, possiamo facilmente sostituire questi componenti con implementazioni pi√π sofisticate senza modificare l&rsquo;architettura complessiva.</p><h1 id=6-scansione-ai-raggi-x-di-una-richiesta-utente>6. Scansione ai raggi X di una richiesta utente</h1><p>Per capire bene come funziona il sistema AlphaAgents, vediamolo in azione!
Ho eseguito un test end-to-end utilizzando una query utente significativa che richiede il coinvolgimento di tutti e tre gli agenti specializzati.</p><p><strong>Query dell&rsquo;utente</strong>: <em>&ldquo;Sono indeciso se investire in Tesla oppure in Palantir. Il mio orizzonte di investimento √® di 5-7 anni e voglio rendimenti massimi, posso gestire un rischio elevato&rdquo;</em></p><p>In questa sezione, documenter√≤ passo passo tutto ci√≤ che accade dietro le quinte dal momento in cui la richiesta viene ricevuta dal Group Chat Agent fino alla generazione del report finale di sintesi.</p><h2 id=61-fase-1-inizializzazione-e-setup-dellecosistema>6.1 Fase 1: Inizializzazione e Setup dell&rsquo;Ecosistema</h2><p>Prima che la query utente possa essere elaborata, √® necessario che tutto l&rsquo;ecosistema AlphaAgents sia attivo e operativo:</p><h3 id=611-avvio-dellagent-registry>6.1.1 Avvio dell&rsquo;Agent Registry</h3><p>L&rsquo;Agent Registry √® il primo componente che deve essere attivato, in quanto tutti gli agenti dipendono da esso per la discovery:</p><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-bash"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title="Copia negli appunti"><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Agent Registry attivo su porta 8000</span>
</span></span><span class=line><span class=cl>curl -s http://localhost:8000/health
</span></span><span class=line><span class=cl><span class=c1># Response: {&#34;status&#34;:&#34;ok&#34;,&#34;time&#34;:&#34;2025-08-30T17:06:48.102057+00:00&#34;}</span></span></span></code></pre></div></div><h3 id=612-startup-degli-agenti-specializzati>6.1.2 Startup degli Agenti Specializzati</h3><p>Ho lanciato gli agenti specializzati nella mia configurazione locale nelle porte [3001, 3002, 3003]:</p><p><strong>Valuation Agent</strong> (porta 3001):</p><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-plaintext"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title="Copia negli appunti"><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-plaintext data-lang=plaintext><span class=line><span class=cl>2025-08-30 19:06:50 - __main__ - INFO - Starting Valuation Agent...
</span></span><span class=line><span class=cl>2025-08-30 19:06:50 - valuation_agent.agent - INFO - Valuation Agent initialized successfully
</span></span><span class=line><span class=cl>2025-08-30 19:06:50 - valuation_agent.server - INFO - A2A Valuation Server initialized on 0.0.0.0:3001
</span></span><span class=line><span class=cl>INFO: Uvicorn running on http://0.0.0.0:3001</span></span></code></pre></div></div><p><strong>Sentiment Agent</strong> (porta 3002):</p><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-plaintext"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title="Copia negli appunti"><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-plaintext data-lang=plaintext><span class=line><span class=cl>2025-08-30 19:06:50 - __main__ - INFO - Starting Sentiment Agent...
</span></span><span class=line><span class=cl>2025-08-30 19:06:50 - sentiment_agent.agent - INFO - Sentiment Agent initialized successfully
</span></span><span class=line><span class=cl>2025-08-30 19:06:50 - sentiment_agent.server - INFO - A2A Sentiment Server initialized on 0.0.0.0:3002
</span></span><span class=line><span class=cl>INFO: Uvicorn running on http://0.0.0.0:3002</span></span></code></pre></div></div><p><strong>Fundamental Agent</strong> (porta 3003):</p><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-plaintext"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title="Copia negli appunti"><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-plaintext data-lang=plaintext><span class=line><span class=cl>2025-08-30 19:06:50 - __main__ - INFO - Starting Fundamental Agent...
</span></span><span class=line><span class=cl>2025-08-30 19:06:50 - fundamental_agent.agent - INFO - Fundamental Agent initialized successfully
</span></span><span class=line><span class=cl>2025-08-30 19:06:50 - fundamental_agent.server - INFO - A2A Fundamental Server initialized on 0.0.0.0:3003
</span></span><span class=line><span class=cl>INFO: Uvicorn running on http://0.0.0.0:3003</span></span></code></pre></div></div><h3 id=613-avvio-del-group-chat-agent>6.1.3 Avvio del Group Chat Agent</h3><p>Il Group Chat Agent √® l&rsquo;ultimo a essere avviato ed agisce come orchestratore:</p><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-plaintext"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title="Copia negli appunti"><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-plaintext data-lang=plaintext><span class=line><span class=cl>2025-08-30 19:07:31 - groupchat_agent.server - INFO - Starting GroupChat Agent server on 0.0.0.0:3000
</span></span><span class=line><span class=cl>2025-08-30 19:07:31 - groupchat_agent.a2a_agent - INFO - A2A GroupChat Agent initialized successfully
</span></span><span class=line><span class=cl>INFO: Uvicorn running on http://0.0.0.0:3000</span></span></code></pre></div></div><h2 id=62-fase-2-ricezione-e-parsing-della-query-utente>6.2 Fase 2: Ricezione e Parsing della Query Utente</h2><h3 id=621-richiesta-json-rpc-a2a>6.2.1 Richiesta JSON-RPC A2A</h3><p>La query utente viene inviata al Group Chat Agent tramite protocollo JSON-RPC:</p><div class="code-block code-line-numbers" style="counter-reset:code-block 0"><div class="code-header language-json"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title="Copia negli appunti"><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;jsonrpc&#34;</span><span class=p>:</span> <span class=s2>&#34;2.0&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;method&#34;</span><span class=p>:</span> <span class=s2>&#34;message/send&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;params&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;message&#34;</span><span class=p>:</span> <span class=s2>&#34;Sono indeciso se investire in Tesla oppure in Palantir. Il mio orizzonte di investimento √® di 5-7 anni e voglio rendimenti massimi, posso gestire un rischio elevato&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;metadata&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;user_id&#34;</span><span class=p>:</span> <span class=s2>&#34;demo_user&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=nt>&#34;session_id&#34;</span><span class=p>:</span> <span class=s2>&#34;demo_session&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;id&#34;</span><span class=p>:</span> <span class=s2>&#34;1&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div></div><h3 id=622-conversione-in-formato-a2a-message>6.2.2 Conversione in Formato A2A Message</h3><p>Il server converte automaticamente la query in formato A2A Message standard:</p><div class="code-block code-line-numbers" style="counter-reset:code-block 0"><div class="code-header language-json"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title="Copia negli appunti"><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;kind&#34;</span><span class=p>:</span> <span class=s2>&#34;message&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;messageId&#34;</span><span class=p>:</span> <span class=s2>&#34;uuid-generated&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;role&#34;</span><span class=p>:</span> <span class=s2>&#34;user&#34;</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>  <span class=nt>&#34;parts&#34;</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;kind&#34;</span><span class=p>:</span> <span class=s2>&#34;text&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;text&#34;</span><span class=p>:</span> <span class=s2>&#34;Sono indeciso se investire in Tesla oppure in Palantir. Il mio orizzonte di investimento √® di 5-7 anni e voglio rendimenti massimi, posso gestire un rischio elevato&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;contextId&#34;</span><span class=p>:</span> <span class=s2>&#34;demo_session&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div></div><h2 id=63-fase-3-inferenza-automatica-del-risk-tolerance>6.3 Fase 3: Inferenza Automatica del Risk Tolerance</h2><h3 id=631-chiamata-llm-per-risk-assessment>6.3.1 Chiamata LLM per Risk Assessment</h3><p>Il sistema analizza semanticamente la query dell&rsquo;utente per inferire automaticamente il profilo di rischio:</p><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-plaintext"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title="Copia negli appunti"><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-plaintext data-lang=plaintext><span class=line><span class=cl>2025-08-30 19:09:40 - groupchat_agent.a2a_agent - INFO - Inferred risk_tolerance: seeking from user message</span></span></code></pre></div></div><p><strong>Prompt LLM utilizzato</strong>:</p><div class="code-block code-line-numbers" style="counter-reset:code-block 0"><div class="code-header language-python"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title="Copia negli appunti"><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>You are a financial risk tolerance classifier. 
</span></span></span><span class=line><span class=cl><span class=s2>Analyze the user&#39;s message to determine their risk tolerance profile.
</span></span></span><span class=line><span class=cl><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2>RISK TOLERANCE LEVELS:
</span></span></span><span class=line><span class=cl><span class=s2>- &#34;averse&#34;: Conservative investors (capital preservation, stable returns, dividends)
</span></span></span><span class=line><span class=cl><span class=s2>- &#34;neutral&#34;: Balanced investors (moderate growth with reasonable risk)  
</span></span></span><span class=line><span class=cl><span class=s2>- &#34;seeking&#34;: Aggressive investors (high returns, accept high volatility)
</span></span></span><span class=line><span class=cl><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2>User message: &#34;Sono indeciso se investire in Tesla oppure in Palantir. Il mio orizzonte di investimento √® di 5-7 anni e voglio rendimenti massimi, posso gestire un rischio elevato&#34;
</span></span></span><span class=line><span class=cl><span class=s2>&#34;&#34;&#34;</span></span></span></code></pre></div></div><p><strong>Risultato</strong>: <code>risk_tolerance: "seeking"</code></p><p>Come da attese, il sistema ha identificato un profilo aggressivo basandosi su &ldquo;rendimenti massimi&rdquo; e &ldquo;posso gestire un rischio elevato&rdquo;.</p><h2 id=64-fase-4-agent-discovery-e-routing-intelligente>6.4 Fase 4: Agent Discovery e Routing Intelligente</h2><h3 id=641-recupero-agent-card-dallagent-registry>6.4.1 Recupero Agent Card dall&rsquo;Agent Registry</h3><p>Il Group Chat Agent interroga l&rsquo;Agent Registry per ottenere l&rsquo;Agent Card e gli endpoint degli agenti richiesti:</p><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-plaintext"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title="Copia negli appunti"><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-plaintext data-lang=plaintext><span class=line><span class=cl>2025-08-30 19:09:40 - groupchat_agent.registry_service - INFO - Fetching specialist agent URLs from registry...
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>HTTP Request: GET http://localhost:8000/agents?name=valuation
</span></span><span class=line><span class=cl>HTTP Request: GET http://localhost:8000/agents?name=sentiment  
</span></span><span class=line><span class=cl>HTTP Request: GET http://localhost:8000/agents?name=fundamental
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>2025-08-30 19:09:40 - groupchat_agent.registry_service - INFO - Found agent &#39;valuation&#39; at http://0.0.0.0:3001/
</span></span><span class=line><span class=cl>2025-08-30 19:09:40 - groupchat_agent.registry_service - INFO - Found agent &#39;sentiment&#39; at http://0.0.0.0:3002
</span></span><span class=line><span class=cl>2025-08-30 19:09:40 - groupchat_agent.registry_service - INFO - Found agent &#39;fundamental&#39; at http://0.0.0.0:3003/</span></span></code></pre></div></div><h3 id=642-routing-llm-per-selezione-agenti>6.4.2 Routing LLM per Selezione Agenti</h3><p>Il sistema usa un prompt per determinare quali agenti coinvolgere:</p><p><strong>Prompt LLM Routing</strong>:</p><div class="code-block code-line-numbers" style="counter-reset:code-block 0"><div class="code-header language-python"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title="Copia negli appunti"><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>You are a routing coordinator for financial analysis agents. 
</span></span></span><span class=line><span class=cl><span class=s2>Analyze the user&#39;s request and determine which specialist agents should be consulted:
</span></span></span><span class=line><span class=cl><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2>AVAILABLE AGENTS:
</span></span></span><span class=line><span class=cl><span class=s2>- valuation: Technical analysis, price charts, volatility, quantitative metrics
</span></span></span><span class=line><span class=cl><span class=s2>- sentiment: News analysis, market sentiment, social media trends  
</span></span></span><span class=line><span class=cl><span class=s2>- fundamental: Financial reports, earnings, company fundamentals, SEC filings
</span></span></span><span class=line><span class=cl><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2>User request: Sono indeciso se investire in Tesla oppure in Palantir. Il mio orizzonte di investimento √® di 5-7 anni e voglio rendimenti massimi, posso gestire un rischio elevato
</span></span></span><span class=line><span class=cl><span class=s2>&#34;&#34;&#34;</span></span></span></code></pre></div></div><p><strong>Risultato</strong>:</p><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-plaintext"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title="Copia negli appunti"><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-plaintext data-lang=plaintext><span class=line><span class=cl>2025-08-30 19:09:41 - groupchat_agent.a2a_agent - INFO - ü§ñ LLM ROUTING RESPONSE: [&#34;valuation&#34;, &#34;sentiment&#34;, &#34;fundamental&#34;]
</span></span><span class=line><span class=cl>2025-08-30 19:09:41 - groupchat_agent.a2a_agent - INFO - Determined required agents: [&#39;valuation&#39;, &#39;sentiment&#39;, &#39;fundamental&#39;]</span></span></code></pre></div></div><h3 id=643-decisione-per-debate-strutturato>6.4.3 Decisione per Debate Strutturato</h3><p>Un altro prompt determina se la query richiede debate strutturato o coordinamento semplice:</p><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-plaintext"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title="Copia negli appunti"><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-plaintext data-lang=plaintext><span class=line><span class=cl>2025-08-30 19:09:41 - groupchat_agent.a2a_agent - INFO - ü§î LLM DEBATE DECISION: YES for query: &#39;Sono indeciso se investire in Tesla oppure in Pala...&#39;
</span></span><span class=line><span class=cl>2025-08-30 19:09:41 - groupchat_agent.a2a_agent - INFO - Multi-agent analysis detected - initiating structured debate</span></span></code></pre></div></div><h2 id=65-fase-5-round-1---analisi-iniziali>6.5 Fase 5: Round 1 - Analisi Iniziali</h2><p>Viene attivato il meccanismo di debate strutturato con round-robin. Ogni agente presenta la sua analisi iniziale sequenzialmente.</p><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-plaintext"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title="Copia negli appunti"><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-plaintext data-lang=plaintext><span class=line><span class=cl>2025-08-30 19:09:41 - groupchat_agent.a2a_agent - INFO - Starting structured debate with agents: [&#39;valuation&#39;, &#39;sentiment&#39;, &#39;fundamental&#39;]
</span></span><span class=line><span class=cl>2025-08-30 19:09:41 - groupchat_agent.a2a_agent - INFO - === INITIAL ANALYSIS ROUND ===</span></span></code></pre></div></div><h3 id=651-valuation-agent---round-1>6.5.1 Valuation Agent - Round 1</h3><p><strong>Ticker Resolution</strong>:
Il Valuation Agent inizia risolvendo i nomi delle compagnie in ticker di borsa, poi recupera i dati finanziari, calcola le metriche di valutazione ed infine genera un breve report di sintesi in cui consiglia di investire in Palantir:</p><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-bash"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title="Copia negli appunti"><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>&gt; Entering new AgentExecutor chain...
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Invoking: <span class=sb>`</span>resolve_company_ticker<span class=sb>`</span> with <span class=sb>`</span><span class=o>{</span><span class=s1>&#39;query&#39;</span>: <span class=s1>&#39;Tesla&#39;</span><span class=o>}</span><span class=sb>`</span>
</span></span><span class=line><span class=cl>‚Üí <span class=o>{</span><span class=s1>&#39;success&#39;</span>: True, <span class=s1>&#39;query&#39;</span>: <span class=s1>&#39;Tesla&#39;</span>, <span class=s1>&#39;ticker&#39;</span>: <span class=s1>&#39;TSLA&#39;</span>, <span class=s1>&#39;company_name&#39;</span>: <span class=s1>&#39;Tesla, Inc.&#39;</span>, <span class=s1>&#39;resolution_method&#39;</span>: <span class=s1>&#39;company_mapping&#39;</span><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Invoking: <span class=sb>`</span>resolve_company_ticker<span class=sb>`</span> with <span class=sb>`</span><span class=o>{</span><span class=s1>&#39;query&#39;</span>: <span class=s1>&#39;Palantir&#39;</span><span class=o>}</span><span class=sb>`</span>  
</span></span><span class=line><span class=cl>‚Üí <span class=o>{</span><span class=s1>&#39;success&#39;</span>: False, <span class=s1>&#39;query&#39;</span>: <span class=s1>&#39;Palantir&#39;</span>, <span class=s1>&#39;error&#39;</span>: <span class=s2>&#34;Could not resolve &#39;Palantir&#39; to a valid stock ticker&#34;</span><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Invoking: <span class=sb>`</span>resolve_company_ticker<span class=sb>`</span> with <span class=sb>`</span><span class=o>{</span><span class=s1>&#39;query&#39;</span>: <span class=s1>&#39;PLTR&#39;</span><span class=o>}</span><span class=sb>`</span>
</span></span><span class=line><span class=cl>‚Üí <span class=o>{</span><span class=s1>&#39;success&#39;</span>: True, <span class=s1>&#39;query&#39;</span>: <span class=s1>&#39;PLTR&#39;</span>, <span class=s1>&#39;ticker&#39;</span>: <span class=s1>&#39;PLTR&#39;</span>, <span class=s1>&#39;company_name&#39;</span>: <span class=s1>&#39;Palantir Technologies Inc.&#39;</span>, <span class=s1>&#39;resolution_method&#39;</span>: <span class=s1>&#39;direct_ticker&#39;</span><span class=o>}</span></span></span></code></pre></div></div><p><strong>Recupero Dati Finanziari</strong>:</p><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-bash"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title="Copia negli appunti"><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>Invoking: <span class=sb>`</span>fetch_stock_data<span class=sb>`</span> with <span class=sb>`</span><span class=o>{</span><span class=s1>&#39;symbol&#39;</span>: <span class=s1>&#39;TSLA&#39;</span>, <span class=s1>&#39;period_days&#39;</span>: 365<span class=o>}</span><span class=sb>`</span>
</span></span><span class=line><span class=cl>‚Üí Successfully fetched <span class=m>250</span> data points <span class=k>for</span> TSLA
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Invoking: <span class=sb>`</span>fetch_stock_data<span class=sb>`</span> with <span class=sb>`</span><span class=o>{</span><span class=s1>&#39;symbol&#39;</span>: <span class=s1>&#39;PLTR&#39;</span>, <span class=s1>&#39;period_days&#39;</span>: 365<span class=o>}</span><span class=sb>`</span>  
</span></span><span class=line><span class=cl>‚Üí Successfully fetched <span class=m>250</span> data points <span class=k>for</span> PLTR</span></span></code></pre></div></div><p><strong>Calcoli di Volatilit√† e Metriche</strong>:</p><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-bash"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title="Copia negli appunti"><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>Invoking: <span class=sb>`</span>calculate_volatility_metrics<span class=sb>`</span> with <span class=sb>`</span><span class=o>{</span><span class=s1>&#39;symbol&#39;</span>: <span class=s1>&#39;TSLA&#39;</span><span class=o>}</span><span class=sb>`</span>
</span></span><span class=line><span class=cl>Invoking: <span class=sb>`</span>calculate_volatility_metrics<span class=sb>`</span> with <span class=sb>`</span><span class=o>{</span><span class=s1>&#39;symbol&#39;</span>: <span class=s1>&#39;PLTR&#39;</span><span class=o>}</span><span class=sb>`</span></span></span></code></pre></div></div><p><strong>Analisi Comparativa del Valuation Agent</strong>:</p><p><strong>Tesla (TSLA)</strong>:</p><ul><li>Prezzo attuale: $333.87</li><li>Rendimento totale (1 anno): <strong>58.53%</strong></li><li>Rendimento annualizzato: <strong>59.42%</strong></li><li>Volatilit√† annualizzata: <strong>71.44%</strong></li><li>Sharpe Ratio: <strong>0.76</strong></li><li>Max Drawdown: <strong>-53.77%</strong></li></ul><p><strong>Palantir (PLTR)</strong>:</p><ul><li>Prezzo attuale: $156.71</li><li>Rendimento totale (1 anno): <strong>413.63%</strong></li><li>Rendimento annualizzato: <strong>423.86%</strong></li><li>Volatilit√† annualizzata: <strong>72.53%</strong></li><li>Sharpe Ratio: <strong>5.77</strong></li><li>Max Drawdown: <strong>-40.61%</strong></li></ul><p><strong>Raccomandazione Valuation Agent</strong>:</p><blockquote><p><em><strong>STRONG BUY Palantir</strong></em><br><em>Palantir&rsquo;s superior risk-adjusted returns and extraordinary growth potential make it a more attractive option for maximizing returns.</em></p></blockquote><h3 id=652-sentiment-agent---round-1>6.5.2 Sentiment Agent - Round 1</h3><p>Il Sentiment Agent effettua una ricerca di news in merito a Tesla e Palantir su Yahoo Finance e Google News, recupera il testo degli articoli e calcola i punteggi di sentiment utilizzando VADER e TextBlob.</p><p><strong>Raccolta News Finanziarie</strong>:</p><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-plaintext"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title="Copia negli appunti"><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-plaintext data-lang=plaintext><span class=line><span class=cl>2025-08-30 19:10:08 - sentiment_agent.tools - INFO - Collecting news for TSLA (Tesla, Inc.)
</span></span><span class=line><span class=cl>2025-08-30 19:10:08 - sentiment_agent.tools - INFO - Collecting news for PLTR (Palantir Technologies Inc.)
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>HTTP Request: GET https://feeds.finance.yahoo.com/rss/2.0/headline?s=TSLA&amp;region=US&amp;lang=en-US
</span></span><span class=line><span class=cl>HTTP Request: GET https://feeds.finance.yahoo.com/rss/2.0/headline?s=PLTR&amp;region=US&amp;lang=en-US
</span></span><span class=line><span class=cl>HTTP Request: GET https://news.google.com/rss/search?q=&#34;Tesla,+Inc.&#34;+OR+&#34;TSLA&#34;+stock+finance
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>2025-08-30 19:10:09 - sentiment_agent.tools - INFO - Successfully collected 9 articles for TSLA
</span></span><span class=line><span class=cl>2025-08-30 19:10:09 - sentiment_agent.tools - INFO - Successfully collected 6 articles for PLTR</span></span></code></pre></div></div><p><strong>Analisi Sentiment con VADER + TextBlob</strong>:</p><p><strong>Tesla (TSLA)</strong>:</p><ul><li>Sentiment complessivo: <strong>Neutrale</strong></li><li>TextBlob Average: 0.0024</li><li>VADER Average: -0.0651</li><li>Combined Average: <strong>-0.0381</strong> (leggera tendenza negativa)</li><li>Distribuzione: 22% positive, 33% negative, 44% neutral</li></ul><p><strong>Palantir (PLTR)</strong>:</p><ul><li>Sentiment complessivo: <strong>Positivo</strong></li><li>TextBlob Average: 0.0235</li><li>VADER Average: 0.4288</li><li>Combined Average: <strong>0.2667</strong> (moderatamente positivo)</li><li>Distribuzione: 83% positive, 17% negative</li></ul><p><strong>Key News Analysis Tesla</strong>:</p><ul><li><strong>Negative</strong>: &ldquo;Nearly Half Of Americans Say Tesla FSD Should Be Illegal&rdquo;</li><li><strong>Negative</strong>: &ldquo;Tesla&rsquo;s sales down 40% in EU while Chinese EV maker BYD is up 200%&rdquo;</li><li><strong>Positive</strong>: &ldquo;Tesla Stock is Going Up Today? TSLA Shares Jump to June Highs on Elon Musk&rsquo;s FSD Optimism&rdquo;</li></ul><p><strong>Key News Analysis Palantir</strong>:</p><ul><li><strong>Positive</strong>: &ldquo;Palantir Technologies Inc. (PLTR)&rsquo;s New Name Is &lsquo;Karpe Diem,&rsquo; Says Jim Cramer&rdquo;</li><li><strong>Positive</strong>: &ldquo;Moody&rsquo;s Just Upgraded The Top S&amp;P 500 Stock Not Named Palantir&rdquo;</li></ul><p><strong>Raccomandazione Sentiment Agent</strong>:</p><blockquote><p><em><strong>BUY Palantir</strong></em><br><em>Strong positive sentiment and market performance vs Tesla&rsquo;s neutral sentiment with regulatory challenges.</em></p></blockquote><h3 id=653-fundamental-agent---round-1>6.5.3 Fundamental Agent - Round 1</h3><p>L&rsquo;output dell&rsquo;agente Fundamental √® molto pi√π articolato e dettagliato. In particolare, non ha indicato una preferenza specifica di investimento, ma ha invece suggerito una strategia bivalente (SELL su Tesla e BUY su Palantir)</p><p><strong>Analisi Finanziaria Approfondita</strong>:</p><p>In un primo momento, l&rsquo;agente recupera ed esamina i rapporti finanziari di entrambe le aziende, evidenziando le loro performance e metriche chiave. I dati vengono recuperati tramite le API di Yahoo Finance.</p><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-plaintext"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title="Copia negli appunti"><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-plaintext data-lang=plaintext><span class=line><span class=cl>2025-08-30 19:10:38 - fundamental_agent.tools - INFO - Pulling financial reports for TSLA (Tesla, Inc.)
</span></span><span class=line><span class=cl>2025-08-30 19:10:40 - fundamental_agent.tools - INFO - Successfully retrieved financial reports for TSLA
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>2025-08-30 19:10:40 - fundamental_agent.tools - INFO - Pulling financial reports for PLTR (Palantir Technologies Inc.) 
</span></span><span class=line><span class=cl>2025-08-30 19:10:42 - fundamental_agent.tools - INFO - Successfully retrieved financial reports for PLTR</span></span></code></pre></div></div><p><strong>RAG-based Analysis Results</strong>:</p><p>Come anticipato in precedenza, non si tratta di una vera analisi RAG, ma piuttosto di una ricerca delle informazioni rilevanti a partire dall&rsquo;output delle API di Yahoo finance. Partendo dai dati finanziari recuperati, l&rsquo;agente calcola i KPI di interesse e produce un parere da &ldquo;<em>esperto</em>&rdquo;.</p><p><strong>Tesla (TSLA)</strong>:</p><ul><li>Settore: Consumer Cyclical - Auto Manufacturers</li><li><strong>Gross Margin</strong>: 17.48%</li><li><strong>Operating Margin</strong>: 4.10%</li><li><strong>Revenue Growth</strong>: <strong>-11.80%</strong> (negativo)</li><li><strong>Earnings Growth</strong>: <strong>-17.50%</strong> (negativo)</li><li><strong>Fundamental Score</strong>: <strong>0/100</strong></li><li><strong>Investment Recommendation</strong>: <strong>SELL</strong></li></ul><blockquote><p><strong>Concerns</strong>: <em>&ldquo;Low operating margin indicates operational challenges, negative revenue growth indicates declining business</em>&rdquo;</p></blockquote><p><strong>Palantir (PLTR)</strong>:</p><ul><li>Settore: Technology - Software Infrastructure</li><li><strong>Gross Margin</strong>: <strong>80.03%</strong> (eccellente)</li><li><strong>Operating Margin</strong>: <strong>26.83%</strong> (forte)</li><li><strong>Revenue Growth</strong>: <strong>48.00%</strong> (robusto)</li><li><strong>Earnings Growth</strong>: <strong>116.70%</strong> (straordinario)</li><li><strong>Fundamental Score</strong>: <strong>100/100</strong></li><li><strong>Investment Recommendation</strong>: <strong>BUY</strong></li></ul><blockquote><p><strong>Strengths</strong>: <em>Strong gross margin indicates good pricing power, Strong operating margin indicates efficient operations, Strong revenue growth indicates market expansion</em></p></blockquote><h2 id=66-round-2-del-debate>6.6 Round 2 del Debate</h2><p>Il sistema procede con il Round 2 del debate strutturato, dove ogni agente ha l&rsquo;opportunit√† di rispondere alle analisi degli altri:</p><div class="code-block code-line-numbers open" style="counter-reset:code-block 0"><div class="code-header language-plaintext"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title="Copia negli appunti"><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-plaintext data-lang=plaintext><span class=line><span class=cl>2025-08-30 19:11:12 - groupchat_agent.a2a_agent - INFO - === DEBATE ROUND 2 ===
</span></span><span class=line><span class=cl>2025-08-30 19:11:12 - groupchat_agent.a2a_agent - INFO - Round 2: valuation&#39;s turn (turn #2)</span></span></code></pre></div></div><h3 id=661-dibattito>6.6.1 Dibattito</h3><p>Gli agenti, nel Round 2, hanno accesso alle analisi degli altri agenti e possono presentare controargomentazioni o rafforzare le proprie posizioni. Questo processo permette di:</p><ul><li><strong>Identificare disaccordi</strong>: Tesla vs Palantir come investimento ottimale</li><li><strong>Confrontare metodologie</strong>: Analisi tecnica vs fondamentale vs sentiment</li><li><strong>Raffinare raccomandazioni</strong>: Basandosi su feedback peer-to-peer</li><li><strong>Validazione incrociata</strong>: Cross-reference tra diverse prospettive analitiche</li></ul><h3 id=662-processo-di-consensus-building>6.6.2 Processo di Consensus Building</h3><p>Il Group Agent ha una soglia per il consenso tra gli agenti che √® configurata tramite una variabile di ambiente. Nello specifico, ho lasciato il valore di default del 75%, ma potrebbe essere regolato in base alle esigenze del dibattito.
In ogni caso, per il test eseguito non ci sono state differenze significative nella risposta, per cui √® stato molto facile raggiungere un consenso.</p><p>Ciononostante, prima di procedere alla fase di consolidamento, il Group Agent ha comunque evidenziato alcuni elementi distintivi delle risposte dei 3 agenti, e poi ha fornito un commento di sintesi:</p><blockquote><ol><li><p><strong>Valuation vs Fundamental divergence su Tesla</strong>:</p><ul><li><strong>Valuation Agent</strong>: Tesla ha mostrato 59.42% rendimento annualizzato ‚Üí Potenziale BUY</li><li><strong>Fundamental Agent</strong>: Tesla ha -11.80% crescita ricavi, margini operativi 4.10% ‚Üí SELL</li></ul></li><li><p><strong>Consensus su Palantir</strong>:</p><ul><li><strong>Valuation</strong>: 423.86% rendimento annualizzato, Sharpe 5.77 ‚Üí STRONG BUY</li><li><strong>Fundamental</strong>: Score 100/100, margini 80.03% ‚Üí BUY</li><li><strong>Sentiment</strong>: 83% sentiment positivo ‚Üí BUY</li></ul></li><li><p><strong>Risk-adjusted perspective</strong>:</p><ul><li><strong>Tutti concordano</strong>: Per investitore risk-seeking con orizzonte 5-7 anni, Palantir √® superiore a Tesla</li></ul></li></ol></blockquote><h2 id=67-fase-7-consolidamento-finale-e-report-generation>6.7 Fase 7: Consolidamento Finale e Report Generation</h2><h3 id=671-llm-based-synthesis>6.7.1 LLM-based Synthesis</h3><p>Il Group Chat Agent utilizza un LLM con prompt ad-hoc per consolidare le analisi multiple.
Per dare una idea di come funziona il processo, riporto un esempio di prompt utilizzato, con alcune variabili che fanno riferimento al contesto:</p><p><strong>Consolidation Prompt</strong>:</p><div class="code-block code-line-numbers" style="counter-reset:code-block 0"><div class="code-header language-python"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title="Copia negli appunti"><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=s2>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s2>You are a financial analysis consolidator. Your role is to synthesize insights from multiple specialist agents into a coherent response.
</span></span></span><span class=line><span class=cl><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2>USER REQUEST: Sono indeciso se investire in Tesla oppure in Palantir. Il mio orizzonte di investimento √® di 5-7 anni e voglio rendimenti massimi, posso gestire un rischio elevato
</span></span></span><span class=line><span class=cl><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2>AGENT ANALYSES:
</span></span></span><span class=line><span class=cl><span class=s2>**VALUATION AGENT:**
</span></span></span><span class=line><span class=cl><span class=s2>[Analisi completa con metriche quantitative...]
</span></span></span><span class=line><span class=cl><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2>**SENTIMENT AGENT:** 
</span></span></span><span class=line><span class=cl><span class=s2>[Analisi sentiment con distribuzione news...]
</span></span></span><span class=line><span class=cl><span class=s2>
</span></span></span><span class=line><span class=cl><span class=s2>**FUNDAMENTAL AGENT:**
</span></span></span><span class=line><span class=cl><span class=s2>[Analisi fondamentale con score...]
</span></span></span><span class=line><span class=cl><span class=s2>&#34;&#34;&#34;</span></span></span></code></pre></div></div><h3 id=672-report-finale>6.7.2 Report Finale</h3><p>Il sistema genera un report finale completo che integra tutte le analisi specialistiche. Ecco il report nella sua interezza:</p><hr><p><strong>üìä ALPHAAGENTS INVESTMENT ANALYSIS REPORT</strong></p><p>The analysis of whether to invest in Tesla (TSLA) or Palantir (PLTR) over a 5-7 year horizon, with a focus on maximizing returns and a willingness to manage high risk, was conducted through a structured multi-agent debate process. This comprehensive approach involved valuation, sentiment, and fundamental analyses, ensuring a well-rounded perspective.</p><p><strong>üéØ CONSENSUS AND KEY FINDINGS:</strong></p><p><strong>1. Palantir Technologies Inc. (PLTR)</strong></p><ul><li><strong>Valuation</strong>: Palantir has demonstrated an extraordinary annualized return of 423.86% with a high Sharpe ratio of 5.77, indicating exceptional risk-adjusted returns. The volatility is high, but the risk-reward profile is favorable.</li><li><strong>Sentiment</strong>: The sentiment analysis shows a strong positive outlook, with 83% of articles reflecting positive sentiment. This aligns with the valuation analysis, reinforcing Palantir&rsquo;s growth potential.</li><li><strong>Fundamentals</strong>: Palantir&rsquo;s strong growth metrics and operational efficiency support the positive sentiment and valuation findings.</li></ul><p><strong>Recommendation: STRONG BUY</strong>. Palantir is recommended for risk-seeking investors due to its exceptional growth potential and positive sentiment, making it an attractive option for maximizing returns.</p><p><strong>2. Tesla, Inc. (TSLA):</strong></p><ul><li><strong>Valuation</strong>: Tesla has a strong annualized return of 59.42% with high volatility. The Sharpe ratio of 0.76 suggests moderate risk-adjusted returns. The potential for significant returns exists, but with substantial risk.</li><li><strong>Sentiment</strong>: The sentiment analysis is neutral with a slight negative tilt, reflecting concerns about automotive sector challenges and regulatory issues with Tesla&rsquo;s Full Self-Driving technology.</li><li><strong>Fundamentals</strong>: Operational challenges and strategic uncertainties contribute to a more cautious outlook.</li></ul><p><strong>Recommendation: HOLD</strong>. While Tesla has potential upside, the current sentiment and operational challenges suggest a more cautious approach. Investors should wait for more positive sentiment or strategic clarity before increasing exposure.</p><p><strong>üèÜ FINAL RECOMMENDATION:</strong></p><p>Based on the collective reasoning from the multi-agent debate, <strong>Palantir (PLTR)</strong> is the preferred choice for a risk-seeking investor aiming for maximum returns over a 5-7 year horizon. Its strong positive sentiment, exceptional risk-adjusted returns, and growth potential make it a compelling investment.</p><p><strong>Tesla (TSLA)</strong>, while still a strong contender, is recommended as a hold due to its current neutral sentiment and operational challenges. Investors should monitor Tesla for strategic developments that could enhance its investment appeal.</p><p>This analysis benefits from the collaborative insights of multiple expert perspectives, providing increased confidence in the recommendations provided.</p><hr><h3 id=673-metadata-del-processo-di-debate>6.7.3 Metadata del Processo di Debate</h3><p>Il report finale include anche alcuni metadati sul processo seguito, che possono essere utilizzati per analisi di explainability:</p><div class="code-block code-line-numbers" style="counter-reset:code-block 0"><div class="code-header language-json"><span class=code-title><i class="arrow fas fa-angle-right fa-fw" aria-hidden=true></i></span>
<span class=ellipses><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i></span>
<span class=copy title="Copia negli appunti"><i class="far fa-copy fa-fw" aria-hidden=true></i></span></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;debate_metadata&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;total_rounds&#34;</span><span class=p>:</span> <span class=mi>2</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;agents_participated&#34;</span><span class=p>:</span> <span class=p>[</span><span class=s2>&#34;valuation&#34;</span><span class=p>,</span> <span class=s2>&#34;sentiment&#34;</span><span class=p>,</span> <span class=s2>&#34;fundamental&#34;</span><span class=p>],</span>  
</span></span><span class=line><span class=cl>    <span class=nt>&#34;consensus_achieved&#34;</span><span class=p>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;consensus_percentage&#34;</span><span class=p>:</span> <span class=mi>100</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;risk_tolerance_inferred&#34;</span><span class=p>:</span> <span class=s2>&#34;seeking&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;debate_duration&#34;</span><span class=p>:</span> <span class=s2>&#34;3m 32s&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;llm_calls&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;risk_inference&#34;</span><span class=p>:</span> <span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;agent_routing&#34;</span><span class=p>:</span> <span class=mi>1</span><span class=p>,</span> 
</span></span><span class=line><span class=cl>      <span class=nt>&#34;debate_detection&#34;</span><span class=p>:</span> <span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;consolidation&#34;</span><span class=p>:</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></div></div><h2 id=68-performance-e-tempi-di-esecuzione>6.8 Performance e Tempi di Esecuzione</h2><p>Un aspetto importante da documentare √® il tempo necessario per completare l&rsquo;intero processo di analisi. Basandomi sui timestamp registrati durante l&rsquo;esecuzione, ecco il breakdown temporale dettagliato:</p><h3 id=681-durata-complessiva>6.8.1 Durata Complessiva</h3><p><strong>Tempo totale di esecuzione</strong>: <strong>3 minuti e 32 secondi</strong> (dalle 19:09:40 alle 19:13:12)</p><h3 id=682-breakdown-temporale-per-fasi>6.8.2 Breakdown Temporale per Fasi</h3><table><thead><tr><th>Fase</th><th>Durata</th><th>Timestamp Inizio</th><th>Timestamp Fine</th><th>Descrizione</th></tr></thead><tbody><tr><td><strong>Setup Iniziale</strong></td><td>~41s</td><td>19:06:50</td><td>19:07:31</td><td>Avvio di tutti gli agenti, Agent Registry, Healthcheck e verifiche di base</td></tr><tr><td><strong>Query Processing</strong></td><td>~1s</td><td>19:09:40</td><td>19:09:41</td><td>Ricezione e parsing della query utente</td></tr><tr><td><strong>Risk Tolerance Inference</strong></td><td>&lt;1s</td><td>19:09:40</td><td>19:09:40</td><td>Analisi LLM per inferire profilo di rischio</td></tr><tr><td><strong>Agent Discovery</strong></td><td>&lt;1s</td><td>19:09:40</td><td>19:09:40</td><td>Recupero endpoint dall&rsquo;Agent Registry</td></tr><tr><td><strong>Agent Routing</strong></td><td>~1s</td><td>19:09:41</td><td>19:09:41</td><td>Decisione LLM su agenti da coinvolgere</td></tr><tr><td><strong>Debate Detection</strong></td><td>&lt;1s</td><td>19:09:41</td><td>19:09:41</td><td>Decisione LLM per debate strutturato</td></tr><tr><td><strong>Round 1 Analysis</strong></td><td><strong>~91s</strong></td><td>19:09:41</td><td>19:11:12</td><td>Analisi iniziali sequenziali dei 3 agenti</td></tr><tr><td><strong>Round 2 Debate</strong></td><td><strong>~120s</strong></td><td>19:11:12</td><td>19:13:12</td><td>Secondo round e consolidamento finale</td></tr></tbody></table><h3 id=683-analisi-delle-componenti-pi√π-costose>6.8.3 Analisi delle Componenti pi√π Costose</h3><p><strong>Le fasi pi√π time-intensive sono</strong>:</p><ol><li><p><strong>Round 1 Analysis (91 secondi)</strong>:</p><ul><li><strong>Valuation Agent</strong>: ~30s per recupero dati Yahoo Finance + calcoli volatilit√†</li><li><strong>Sentiment Agent</strong>: ~30s per raccolta news da fonti multiple + analisi VADER/TextBlob</li><li><strong>Fundamental Agent</strong>: ~31s per processing dati finanziari + keyword matching</li></ul></li><li><p><strong>Round 2 Debate (120 secondi)</strong>:</p><ul><li><strong>Debate structured</strong>: ~60s per secondo round di analisi cross-agent</li><li><strong>LLM Consolidation</strong>: ~60s per sintesi finale e report generation</li></ul></li></ol><h3 id=684-bottlenecks-e-ottimizzazioni-possibili>6.8.4 Bottlenecks e Ottimizzazioni Possibili</h3><p><strong>Colli di bottiglia identificati</strong>:</p><ul><li><strong>API Latency</strong>: Chiamate a Yahoo Finance (~2-3s per request)</li><li><strong>LLM Processing</strong>: Analisi complesse richiedono 10-15s per agente</li><li><strong>Sequential Execution</strong>: Turni sequenziali non parallelizzabili per design</li></ul><p><strong>Ottimizzazioni future</strong>:</p><ul><li><strong>Parallelizzazione Round 1</strong>: Possibile riduzione da 91s a ~35-40s</li><li><strong>Caching dati finanziari</strong>: Evitare retrieve multipli degli stessi ticker</li><li><strong>Model optimization</strong>: Prompt pi√π efficienti o modelli pi√π veloci</li></ul><h1 id=7-conclusioni>7. Conclusioni</h1><h2 id=71-motivazioni-e-obiettivi-del-progetto>7.1 Motivazioni e Obiettivi del Progetto</h2><p>Questo progetto √® nato dall&rsquo;esigenza di <strong>testare concretamente il protocollo A2A e l&rsquo;Agent Registry</strong> in uno scenario applicativo reale, per sperimentare un applicativo multi-agente distribuito.</p><p>Come ho evidenziato nell&rsquo;introduzione, la proliferazione di framework GenAI monolitici e le loro limitazioni nel supporto multi-agente mi hanno spinto a investire un po&rsquo; di tempo per <strong>alzare il livello di astrazione</strong> e provare a disegnare un&rsquo;architettura ad agenti basata su A2A in modo da garantire:</p><ul><li><strong>Standardizzazione della comunicazione</strong> tra agenti eterogenei</li><li><strong>Eliminazione del lock-in</strong> verso framework specifici</li><li><strong>Scalabilit√† orizzontale</strong> attraverso deployment distribuiti</li><li><strong>Interoperabilit√†</strong> tra agenti implementati con stack tecnologici diversi</li></ul><p>Questo piccolo progetto mi ha tenuto sveglio qualche notte ma mi ha dato modo di mettere le mani in pasta con <strong>un sistema multi-agente REALE</strong> diverso dal caso di studio monolitico che spesso viene presentato nella sezione &ldquo;Getting Started&rdquo; di questo o di quel framework di GenAI.</p><p>Sono sempre pi√π convinto che per le soluzioni Enterprise, valga la pena iniziare a pensare seriamente all&rsquo;architettura degli agenti e ai protocolli di collaborazione piuttosto che allo specifico stack tecnologico per implementare questo o quello Use Case.</p><h2 id=72-la-scelta-di-alphaagents>7.2 La Scelta di AlphaAgents</h2><p>La selezione del paper <strong>AlphaAgents di BlackRock</strong> come caso d&rsquo;uso si √® rivelata particolarmente azzeccata perch√©, a fronte di una complessit√† non troppo elevata, mi ha consentito di realizzare una soluzione end-to-end, con risultati tangili e misurabili</p><p>Rispetto al paper originale ho dovuto accettare qualche compromesso per semplificare l&rsquo;implementazione, ma ci√≤ non ha pregiudicato il raggiungimento del mio obiettivo.</p><h2 id=73-sviluppi-futuri>7.3 Sviluppi Futuri</h2><p>Il test end-to-end ha confermato la validit√† dell&rsquo;approccio e mi ha anche fornito alcuni spunti per miglioramenti futuri.</p><h3 id=741-miglioramenti-tecnici>7.4.1 Miglioramenti Tecnici</h3><p><strong>Performance Optimization</strong>:</p><ul><li><strong>Parallelizzazione Round 1</strong>: Riduzione potenziale da 91s a ~35s</li><li><strong>Data caching</strong>: Evitare retrieve multipli degli stessi ticker</li><li><strong>LLM optimization</strong>: Prompt engineering per ridurre latenza</li></ul><p><strong>Affidabilit√† degli agenti</strong>:</p><ul><li><strong>Sentiment Agent</strong>: Integrazione FinBERT per analisi pi√π accurate</li><li><strong>Fundamental Agent</strong>: Implementazione vera RAG con vector embeddings</li><li><strong>Risk Assessment</strong>: Modelli pi√π sofisticati per portfolio risk management</li></ul><p><strong>Miglioramenti sul Registry</strong>:</p><ul><li><strong>Agent versioning</strong> e gestione delle compatibilit√†</li><li><strong>Load balancing</strong> per agenti con istanze multiple</li><li><strong>Health monitoring</strong> e automatic failover</li></ul><h3 id=742-espansioni-funzionali>7.4.2 Espansioni Funzionali</h3><p><strong>Nuovi Agenti Specializzati</strong>:</p><ul><li><strong>Technical Analysis Agent</strong>: Pattern recognition, supporti/resistenze</li><li><strong>Macro Economic Agent</strong>: Analisi macroeconomica e settoriale</li><li><strong>ESG Agent</strong>: Environmental, Social, Governance scoring</li><li><strong>Options Agent</strong>: Analisi derivati e strategie hedging</li></ul><p><strong>Verifica accurata dei risultati</strong>:</p><ul><li><strong>Double check</strong> delle metriche calcolate dal Valuation Agent su ampi campioni di dati</li><li><strong>Cross-validation</strong> con altri modelli di valutazione</li></ul><h2 id=75-considerazioni-sui-risultati-finanziari>7.5 Considerazioni sui Risultati Finanziari</h2><h3 id=751-limitazioni-e-rischi>7.5.1 Limitazioni e Rischi</h3><p><strong>Limitazioni Tecniche</strong>:</p><ul><li><strong>Dati limitati</strong>: Buona parte dell&rsquo;analisi √® basata sui dati di Yahoo Finance, non su fonti professionali</li><li><strong>Mancanza di backtesting</strong>: Come ho pi√π volte sottolineato, non ho effettuato nessuna validazione sistematica su dati storici</li><li><strong>Scope ristretto</strong>: Il campione di analisi su cui ho fatto i test end-to-end √® limitato a poche azioni e poche tipologie di richieste utente</li></ul><p><strong>Rischi</strong>:</p><ul><li><strong>Allucinazioni LLM</strong>: Possibili analisi errate o contraddittorie</li><li><strong>Data quality</strong>: Accuratezza non garantita dei dati di input</li><li><strong>Model bias</strong>: Bias nei modelli di linguaggio utilizzati</li><li><strong>Market conditions</strong>: Non considera condizioni macroeconomiche correnti</li></ul><h3 id=752--disclaimer-importante>7.5.2 ‚ö†Ô∏è Disclaimer Importante</h3><p>Anche alla luce delle limitazioni indicate sopra, tutti i risultati, le raccomandazioni e le analisi presentate in questo articolo sono <strong>esclusivamente a scopo esemplificativo</strong> per illustrare il funzionamento del sistema multi-agente.</p><p><strong>I risultati qui riportati ed il software rilasciato su GitHub NON devono essere utilizzati in alcun modo come</strong>:</p><ul><li>Base per decisioni di investimento reali</li><li>Consigli finanziari o raccomandazioni di trading</li><li>Input per strategie di portfolio management</li></ul><hr></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>Aggiornato il August 31, 2025</span></div></div><div class=post-info-line><div class=post-info-md></div><div class=post-info-share><span><a href=javascript:void(0); title="Condividi su X" data-sharer=x data-url=https://c-daniele.github.io/it/posts/2025-08-31-alphaagents-a2a/ data-title="AlphaAgents: Implementazione Multi-Agent A2A per Analisi Finanziaria Collaborativa" data-hashtags=GenAI,Langchain,Agents><i class="fab fa-x-twitter fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Condividi su Threads" data-sharer=threads data-url=https://c-daniele.github.io/it/posts/2025-08-31-alphaagents-a2a/ data-title="AlphaAgents: Implementazione Multi-Agent A2A per Analisi Finanziaria Collaborativa"><i class="fab fa-threads fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Condividi su Facebook" data-sharer=facebook data-url=https://c-daniele.github.io/it/posts/2025-08-31-alphaagents-a2a/ data-hashtag=GenAI><i class="fab fa-facebook-square fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Condividi su Hacker News" data-sharer=hackernews data-url=https://c-daniele.github.io/it/posts/2025-08-31-alphaagents-a2a/ data-title="AlphaAgents: Implementazione Multi-Agent A2A per Analisi Finanziaria Collaborativa"><i class="fab fa-hacker-news fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Condividi su Line" data-sharer=line data-url=https://c-daniele.github.io/it/posts/2025-08-31-alphaagents-a2a/ data-title="AlphaAgents: Implementazione Multi-Agent A2A per Analisi Finanziaria Collaborativa"><i data-svg-src=https://cdn.jsdelivr.net/npm/simple-icons@15.14.0/icons/line.svg aria-hidden=true></i></a><a href=javascript:void(0); title="Condividi su ÂæÆÂçö" data-sharer=weibo data-url=https://c-daniele.github.io/it/posts/2025-08-31-alphaagents-a2a/ data-title="AlphaAgents: Implementazione Multi-Agent A2A per Analisi Finanziaria Collaborativa"><i class="fab fa-weibo fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Condividi su Diaspora" data-sharer=diaspora data-url=https://c-daniele.github.io/it/posts/2025-08-31-alphaagents-a2a/ data-title="AlphaAgents: Implementazione Multi-Agent A2A per Analisi Finanziaria Collaborativa" data-description><i class="fab fa-diaspora fa-fw" aria-hidden=true></i></a><a href="https://t.me/share/url?url=https%3a%2f%2fc-daniele.github.io%2fit%2fposts%2f2025-08-31-alphaagents-a2a%2f&amp;text=AlphaAgents%3a%20Implementazione%20Multi-Agent%20A2A%20per%20Analisi%20Finanziaria%20Collaborativa" target=_blank title="Condividi su Telegram"><i class="fab fa-telegram fa-fw" aria-hidden=true></i></a></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fas fa-tags fa-fw" aria-hidden=true></i>&nbsp;<a href=/it/tags/genai/>GenAI</a>,&nbsp;<a href=/it/tags/langchain/>Langchain</a>,&nbsp;<a href=/it/tags/agents/>Agents</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>Indietro</a></span>&nbsp;|&nbsp;<span><a href=/it/>Home</a></span></section></div><div class=post-nav><a href=/it/posts/2025-08-15-agent-reg-for-a2a/ class=prev rel=prev title="Agent-Reg: Costruire un Agent Registry aperto per il Protocollo A2A"><i class="fas fa-angle-left fa-fw" aria-hidden=true></i>Agent-Reg: Costruire un Agent Registry aperto per il Protocollo A2A</a>
<a href=/it/posts/2025-10-11-bells-inequalities/ class=next rel=next title="Disuguaglianze di Bell: un esperimento di meccanica quantistica con Qiskit">Disuguaglianze di Bell: un esperimento di meccanica quantistica con Qiskit<i class="fas fa-angle-right fa-fw" aria-hidden=true></i></a></div></div></article></div></main></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title="Torna all'inizio"><i class="fas fa-arrow-up fa-fw" aria-hidden=true></i></a></div><div id=fixed-buttons-hidden><a href=# id=view-comments class=fixed-button title="Vedi commenti"><i class="fas fa-comment fa-fw" aria-hidden=true></i></a></div><script src=https://cdn.jsdelivr.net/npm/autocomplete.js@0.38.1/dist/autocomplete.min.js></script><script src=https://cdn.jsdelivr.net/npm/lunr@2.3.9/lunr.min.js></script><script src=/lib/lunr/lunr.stemmer.support.min.js></script><script src=/lib/lunr/lunr.it.min.js></script><script src=https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js></script><script src=https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js></script><script src=https://cdn.jsdelivr.net/npm/sharer.js@0.5.2/sharer.min.js></script><script>window.config={comment:{},search:{highlightTag:"em",lunrIndexURL:"/it/index.json",lunrLanguageCode:"it",maxResultLength:10,noResultsFound:"Nessun risultato trovato",snippetLength:30,type:"lunr"}}</script><script src=/js/theme.min.js></script><script>var dnt,doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-8NZQZ3Z1RN")}</script><script src="https://www.googletagmanager.com/gtag/js?id=G-8NZQZ3Z1RN" async></script></body></html>